(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-032fc228"],{"3c8d":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-row",[a("el-card",[a("div",{staticClass:"filter-container",staticStyle:{"margin-bottom":"10px"}},[a("el-input",{staticClass:"filter-item",attrs:{placeholder:"盘点单号",clearable:""},on:{clear:e.handleFilter},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleFilter(t)}},model:{value:e.listQuery.Code,callback:function(t){e.$set(e.listQuery,"Code",t)},expression:"listQuery.Code"}}),e._v(" "),a("el-input",{staticClass:"filter-item",attrs:{placeholder:"仓库编码、仓库名称",clearable:""},on:{clear:e.handleFilter},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleFilter(t)}},model:{value:e.listQuery.WarehouseCode,callback:function(t){e.$set(e.listQuery,"WarehouseCode",t)},expression:"listQuery.WarehouseCode"}}),e._v(" "),a("el-input",{staticClass:"filter-item",attrs:{placeholder:"货柜编码",clearable:""},on:{clear:e.handleFilter},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleFilter(t)}},model:{value:e.listQuery.ContainerCode,callback:function(t){e.$set(e.listQuery,"ContainerCode",t)},expression:"listQuery.ContainerCode"}}),e._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-button",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleFilter}},[e._v("查询")])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],key:e.TableKey,staticStyle:{width:"100%","min-height":"100%"},attrs:{data:e.list,"header-cell-style":{background:"#F5F7FA"},border:"",fit:"",size:"mini","highlight-current-row":"",height:e.tableHeight}},[a("el-table-column",{attrs:{type:"index"}}),e._v(" "),a("el-table-column",{attrs:{label:"状态",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.Status?a("el-tag",{attrs:{type:"primary"}},[a("span",[e._v(e._s(t.row.StatusCaption))])]):e._e(),e._v(" "),1===t.row.Status?a("el-tag",{attrs:{type:"warning"}},[a("span",[e._v(e._s(t.row.StatusCaption))])]):e._e(),e._v(" "),2===t.row.Status?a("el-tag",{attrs:{type:"warning"}},[a("span",[e._v(e._s(t.row.StatusCaption))])]):e._e(),e._v(" "),3===t.row.Status?a("el-tag",{attrs:{type:"warning"}},[a("span",[e._v(e._s(t.row.StatusCaption))])]):e._e(),e._v(" "),4===t.row.Status?a("el-tag",{attrs:{type:"warning"}},[a("span",[e._v(e._s(t.row.StatusCaption))])]):e._e(),e._v(" "),5===t.row.Status?a("el-tag",{attrs:{type:"warning"}},[a("span",[e._v(e._s(t.row.StatusCaption))])]):e._e(),e._v(" "),6===t.row.Status?a("el-tag",{attrs:{type:"success"}},[a("span",[e._v(e._s(t.row.StatusCaption))])]):e._e(),e._v(" "),7===t.row.Status?a("el-tag",{attrs:{type:"danger"}},[a("span",[e._v(e._s(t.row.StatusCaption))])]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"仓库编码",width:"90",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.WareHouseCode))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"仓库名称",width:"120",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.WareHouseName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"货柜编码",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.ContainerCode))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"盘点单号",width:"160",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.Code))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"盘点类型",width:"120",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.CheckTypeDescription))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"创建人",width:"120",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.CreatedUserName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"开始时间",width:"160",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.StartTime))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"结束时间",width:"160",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.EndTime))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"备注",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.Remark))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"220","class-name":"small-padding fixed-width",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"info"},on:{click:function(a){return e.handleDetail(t.row)}}},[e._v("详情")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){return e.handleSubmit(t.row)}}},[e._v("提交")])]}}])})],1),e._v(" "),a("div",{staticClass:"pagination-container"},[a("el-pagination",{attrs:{"current-page":e.listQuery.Page,"page-sizes":[10,20,30,50],"page-size":e.listQuery.Rows,total:e.total,background:"",layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)],1),e._v(" "),a("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.textMap[e.dialogStatus],visible:e.dialogFormVisible,width:"40%","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"dataForm",staticClass:"dialog-form",attrs:{rules:e.rules,model:e.Check,"label-width":"100px","label-position":"left"}},[a("el-form-item",{attrs:{label:"仓库编码",prop:"WareHouseCode"}},[a("el-select",{staticStyle:{width:"300px"},attrs:{multiple:!1,"reserve-keyword":"",disabled:"update"==e.dialogStatus},on:{change:e.wareHouseCodeChange},model:{value:e.Check.WareHouseCode,callback:function(t){e.$set(e.Check,"WareHouseCode",t)},expression:"Check.WareHouseCode"}},e._l(e.WareHouseList,function(e){return a("el-option",{key:e.Code,attrs:{label:e.Name,value:e.Code}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"区域编码"}},[a("v-select",{key:"Code",staticStyle:{width:"300px"},attrs:{multiple:!0,"reserve-keyword":"",disabled:"update"==e.dialogStatus,clearable:!0,options:e.areaList,label:"Name",value:"Code"},on:{change:e.areaChange},model:{value:e.Check.AreaCodes,callback:function(t){e.$set(e.Check,"AreaCodes",t)},expression:"Check.AreaCodes"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"盘点类型"}},[a("el-select",{staticStyle:{width:"300px"},attrs:{multiple:!1,"reserve-keyword":""},model:{value:e.Check.CheckDict,callback:function(t){e.$set(e.Check,"CheckDict",t)},expression:"Check.CheckDict"}},e._l(e.dictionaryList,function(e){return a("el-option",{key:e.Code,attrs:{label:e.Name,value:e.Code}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{staticClass:"dialog-input",attrs:{autosize:{minRows:2,maxRows:4},type:"textarea",placeholder:"备注"},model:{value:e.Check.Remark,callback:function(t){e.$set(e.Check,"Remark",t)},expression:"Check.Remark"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")]),e._v(" "),"create"==e.dialogStatus?a("el-button",{attrs:{type:"primary"},on:{click:e.createData}},[e._v("确认")]):a("el-button",{attrs:{type:"primary"},on:{click:e.updateData}},[e._v("确认")])],1)],1),e._v(" "),a("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:"盘点单详情",visible:e.dialogDetial,fullscreen:!0,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogDetial=t}}},[a("div",{staticClass:"filter-container",staticStyle:{"margin-bottom":"20px"}},[a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"物料编码",clearable:""},on:{clear:e.handleDetailFilter},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleDetailFilter(t)}},model:{value:e.listDetailQuery.MaterialCode,callback:function(t){e.$set(e.listDetailQuery,"MaterialCode",t)},expression:"listDetailQuery.MaterialCode"}}),e._v(" "),a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"物料条码",clearable:""},on:{clear:e.handleDetailFilter},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleDetailFilter(t)}},model:{value:e.listDetailQuery.MaterialLabel,callback:function(t){e.$set(e.listDetailQuery,"MaterialLabel",t)},expression:"listDetailQuery.MaterialLabel"}}),e._v(" "),a("el-select",{attrs:{multiple:!1,filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入库位编码","remote-method":e.remoteMethod,loading:e.locationLoading,clearable:""},on:{clear:e.handleDetailFilter,change:e.locationSelectChange},model:{value:e.listDetailQuery.LocationCode,callback:function(t){e.$set(e.listDetailQuery,"LocationCode",t)},expression:"listDetailQuery.LocationCode"}},e._l(e.locationList,function(e){return a("el-option",{key:e.Code,attrs:{label:e.Code,value:e.Code}})}),1),e._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-button",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleDetailFilter}},[e._v("查询")]),e._v(" "),6!==e.Check.Status&&7!=e.Check.Status?a("el-button",{staticClass:"filter-button",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.handleCreateDetail}},[e._v("添加")]):e._e(),e._v(" "),a("el-button",{staticClass:"filter-button",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleConfirmFinish}},[e._v("盘点完成")])],1),e._v(" "),a("el-row",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:!1,expression:"false"}],key:e.TableKey,staticStyle:{width:"100%","min-height":"100%"},attrs:{data:e.detailList,height:"488px","header-cell-style":{background:"#F5F7FA"},border:"",fit:"",size:"mini","highlight-current-row":""}},[a("el-table-column",{attrs:{type:"index",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{label:"状态",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.Status?a("el-tag",{attrs:{type:"primary"}},[a("span",[e._v(e._s(t.row.StatusCaption))])]):e._e(),e._v(" "),1===t.row.Status?a("el-tag",{attrs:{type:"warning"}},[a("span",[e._v(e._s(t.row.StatusCaption))])]):e._e(),e._v(" "),2===t.row.Status?a("el-tag",{attrs:{type:"warning"}},[a("span",[e._v(e._s(t.row.StatusCaption))])]):e._e(),e._v(" "),3===t.row.Status?a("el-tag",{attrs:{type:"warning"}},[a("span",[e._v(e._s(t.row.StatusCaption))])]):e._e(),e._v(" "),4===t.row.Status?a("el-tag",{attrs:{type:"primary"}},[a("span",[e._v(e._s(t.row.StatusCaption))])]):e._e(),e._v(" "),5===t.row.Status?a("el-tag",{attrs:{type:"warning"}},[a("span",[e._v(e._s(t.row.StatusCaption))])]):e._e(),e._v(" "),6===t.row.Status?a("el-tag",{attrs:{type:"success"}},[a("span",[e._v(e._s(t.row.StatusCaption))])]):e._e(),e._v(" "),7===t.row.Status?a("el-tag",{attrs:{type:"danger"}},[a("span",[e._v(e._s(t.row.StatusCaption))])]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"托盘号",width:"100",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.TrayCode))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"库位码",width:"180",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.LocationCode))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"物料条码",width:"180",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.MaterialLabel))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"物料编码",width:"150",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.MaterialCode))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"物料名称",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.MaterialName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"重量(g)",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.Quantity))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"盘点重量(g)",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[i.edit?[a("el-input",{staticClass:"edit-input",staticStyle:{width:"80px"},attrs:{size:"mini"},model:{value:i.CheckedQuantity,callback:function(t){e.$set(i,"CheckedQuantity",t)},expression:"row.CheckedQuantity"}}),e._v(" "),a("el-button",{staticClass:"cancel-btn",attrs:{size:"mini",type:"warning"},on:{click:function(t){return e.cancelDetailEdit(i)}}},[e._v("\n                取消\n              ")])]:a("span",[e._v(e._s(i.CheckedQuantity))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"盘点人",width:"80",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.Checker))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"盘点时间",width:"180",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.CheckedTime))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"120","class-name":"small-padding fixed-width",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[!i.edit||0!=i.Status&&5!=i.Status?e._e():a("el-button",{attrs:{type:"success",size:"small",icon:"el-icon-circle-check-outline"},on:{click:function(t){return e.confirmDetailEdit(i)}}},[e._v("\n              确认\n            ")]),e._v(" "),0!=i.Status&&5!=i.Status||0!=i.edit?e._e():a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.HandDetailEdit(i)}}},[e._v("\n              手动盘点\n            ")])]}}])})],1),e._v(" "),a("div",{staticClass:"pagination-container"},[a("el-pagination",{attrs:{"current-page":e.listDetailQuery.Page,"page-sizes":[10,20,30,50],"page-size":e.listDetailQuery.Rows,total:e.detailTotal,background:"",layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleDetailSizeChange,"current-change":e.handleDetailCurrentChange}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.closeHandCheck}},[e._v("关闭")])],1)],1),e._v(" "),a("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:"新增盘点条码",visible:e.dialogFormDetail,width:"40%","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogFormDetail=t}}},[a("el-form",{ref:"detailDataForm",staticClass:"dialog-form",attrs:{rules:e.detailRules,model:e.CheckDetail,"label-width":"100px","label-position":"left"}},[a("el-form-item",{attrs:{label:"物料名称",prop:"MaterialCode"}},[a("el-select",{staticStyle:{width:"300px"},attrs:{multiple:!1,filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入关键词(物料编码或名称)","remote-method":e.remoteMaterialMethod,loading:e.materialLoading},model:{value:e.CheckDetail.MaterialCode,callback:function(t){e.$set(e.CheckDetail,"MaterialCode",t)},expression:"CheckDetail.MaterialCode"}},e._l(e.materialList,function(e){return a("el-option",{key:e.Code,attrs:{label:e.Name,value:e.Code}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"物料编码"}},[a("el-input",{staticClass:"dialog-input",attrs:{disabled:""},model:{value:e.CheckDetail.MaterialCode,callback:function(t){e.$set(e.CheckDetail,"MaterialCode",t)},expression:"CheckDetail.MaterialCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"物料条码",prop:"MaterialLabel"}},[a("el-input",{staticClass:"dialog-input",attrs:{clearable:""},model:{value:e.CheckDetail.MaterialLabel,callback:function(t){e.$set(e.CheckDetail,"MaterialLabel",t)},expression:"CheckDetail.MaterialLabel"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"批次"}},[a("el-input",{staticClass:"dialog-input",attrs:{clearable:""},model:{value:e.CheckDetail.BatchCode,callback:function(t){e.$set(e.CheckDetail,"BatchCode",t)},expression:"CheckDetail.BatchCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"重量(g)",prop:"Quantity"}},[a("el-input",{staticClass:"dialog-input",attrs:{clearable:""},model:{value:e.CheckDetail.Quantity,callback:function(t){e.$set(e.CheckDetail,"Quantity",t)},expression:"CheckDetail.Quantity"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"盘点重量(g)",prop:"CheckedQuantity"}},[a("el-input",{staticClass:"dialog-input",attrs:{clearable:""},model:{value:e.CheckDetail.CheckedQuantity,callback:function(t){e.$set(e.CheckDetail,"CheckedQuantity",t)},expression:"CheckDetail.CheckedQuantity"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"库位码",prop:"LocationCode"}},[a("el-select",{staticStyle:{width:"300px"},attrs:{multiple:!1,filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入库位编码","remote-method":e.remoteMethod,loading:e.locationLoading,clearable:""},model:{value:e.CheckDetail.LocationCode,callback:function(t){e.$set(e.CheckDetail,"LocationCode",t)},expression:"CheckDetail.LocationCode"}},e._l(e.locationList,function(e){return a("el-option",{key:e.Code,attrs:{label:e.Code,value:e.Code}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"生产日期"}},[[a("el-date-picker",{staticStyle:{width:"300px"},attrs:{type:"date",placeholder:"选择日期"},model:{value:e.CheckDetail.ManufactrueDate,callback:function(t){e.$set(e.CheckDetail,"ManufactrueDate",t)},expression:"CheckDetail.ManufactrueDate"}})]],2)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormDetail=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.createDetailData}},[e._v("确认")])],1)],1),e._v(" "),a("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:"区域详情",visible:e.dialogFormArea,width:"60%","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogFormArea=t}}},[a("el-card",{staticClass:"search-card"},[a("div",{staticClass:"filter-container"},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.handleAreaStart()}}},[e._v("启动")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.handleAreaFinish()}}},[e._v("熄灭")])],1)]),e._v(" "),a("el-card",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:!1,expression:"false"}],key:e.TableKey,staticStyle:{width:"100%","min-height":"100%"},attrs:{data:e.checkAreaList,"header-cell-style":{background:"#F5F7FA"},border:"",size:"mini",fit:"","highlight-current-row":""},on:{"selection-change":e.CheckAreaStart}},[a("el-table-column",{attrs:{type:"selection",width:"30",selectable:e.CheckAreaEnable}}),e._v(" "),a("el-table-column",{attrs:{type:"index",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{label:"状态",width:"110",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.Status?a("el-tag",{attrs:{type:"primary"}},[a("span",[e._v(e._s(t.row.StatusCaption))])]):e._e(),e._v(" "),1===t.row.Status?a("el-tag",{attrs:{type:"warning"}},[a("span",[e._v(e._s(t.row.StatusCaption))])]):e._e(),e._v(" "),2===t.row.Status?a("el-tag",{attrs:{type:"warning"}},[a("span",[e._v(e._s(t.row.StatusCaption))])]):e._e(),e._v(" "),3===t.row.Status?a("el-tag",{attrs:{type:"warning"}},[a("span",[e._v(e._s(t.row.StatusCaption))])]):e._e(),e._v(" "),4===t.row.Status?a("el-tag",{attrs:{type:"success"}},[a("span",[e._v(e._s(t.row.StatusCaption))])]):e._e(),e._v(" "),5===t.row.Status?a("el-tag",{attrs:{type:"warning"}},[a("span",[e._v(e._s(t.row.StatusCaption))])]):e._e(),e._v(" "),6===t.row.Status?a("el-tag",{attrs:{type:"success"}},[a("span",[e._v(e._s(t.row.StatusCaption))])]):e._e(),e._v(" "),7===t.row.Status?a("el-tag",{attrs:{type:"danger"}},[a("span",[e._v(e._s(t.row.StatusCaption))])]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"仓库编码",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.row.MaterialName,placement:"top"}},[a("span",[e._v(e._s(t.row.WareHouseCode))])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"区域编码",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.row.AreaCode,placement:"top"}},[a("span",[e._v(e._s(t.row.AreaCode))])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"盘点单号",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.CheckCode))])]}}])})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormArea=!1}}},[e._v("取消")])],1)],1)],1)},n=[],l=(a("ac4d"),a("8a81"),a("ac6a"),a("4c65")),o=a("6724"),s=a("5c83"),r=a("61f7"),c={name:"Check",directives:{elDragDialog:s["a"],waves:o["a"]},data:function(){var e=function(e,t,a){Object(r["c"])(t)?a():a(new Error("请输入正确格式的数字（包含两位小数的数字或者不包含小数的数字）"))};return{tableHeight:window.innerHeight-350,total:null,detailTotal:null,listLoading:!1,listDetailLoading:!1,listQuery:{Page:1,Rows:10,Code:"",Status:void 0,Sort:"id",Name:""},listDetailQuery:{Page:1,Rows:10,MaterialCode:"",Status:void 0,Sort:"id",MaterialLabel:"",LocationCode:"",CheckCode:"",WareHouseCode:"",TrayId:"",AreaCode:""},downloadLoading:!1,TableKey:0,list:null,detailList:null,dialogFormVisible:!1,dialogFormArea:!1,dialogStatus:"",textMap:{update:"编辑盘点任务",create:"创建盘点任务"},checkAreaList:[],Check:{Id:void 0,Code:"",CheckDict:"",WareHouseCode:"",IsDeleted:!1,StartTime:0,EndTime:"",Status:"",Remark:"",CreatedTime:void 0,CreatedUserCode:"",CreatedUserName:"",ContainerCode:"",AreaCodes:void 0},CheckDetail:{Id:void 0,CheckCode:"",IsDeleted:!1,Quantity:0,CheckedQuantity:0,MaterialCode:"",WareHouseCode:"",AreaCode:"",LocationCode:"",MaterialLabel:"",BatchCode:"",Checker:"",CheckedTime:void 0,Status:4,ManufactureDate:""},rules:{Code:[{required:!0,message:"请输入盘点单号",trigger:"blur"}],WareHouseCode:[{required:!0,message:"请选择仓库",trigger:"blur"}]},detailRules:{MaterialLabel:[{required:!0,message:"请输入盘点条码",trigger:"blur"}],LocaitonCode:[{required:!0,message:"请输入盘点单号",trigger:"blur"}],MaterialCode:[{required:!0,message:"请输入盘点单号",trigger:"blur"}],Quantity:[{required:!0,validator:e,trigger:"blur"}],CheckedQuantity:[{required:!0,validator:e,trigger:"blur"}]},dictionaryList:[],WareHouseList:[],dialogDetial:!1,locationList:null,locationLoading:!1,dialogFormDetail:!1,materialList:[],materialLoading:!1,areaList:[],CheckedAreaList:[]}},watch:{},created:function(){this.getList(),this.getCheckDictTypeList(),this.GetWareHouseList(),this.timer()},destroyed:function(){this.timer&&clearInterval(this.timer)},methods:{handleConfirmFinish:function(){var e=this;Object(l["e"])(this.Check).then(function(t){var a=JSON.parse(t.data.Content);a.Success?(e.getDetailList(),e.$message({title:"成功",message:"盘点成功",type:"success",duration:2e3})):e.$message({title:"失败",message:"盘点失败:"+a.Message,type:"error",duration:2e3})})},GetWareHouseList:function(){var e=this;Object(l["p"])().then(function(t){var a=JSON.parse(t.data.Content);e.WareHouseList=a})},getCheckDictTypeList:function(){var e=this;Object(l["l"])("CheckType").then(function(t){var a=JSON.parse(t.data.Content);e.dictionaryList=a})},getList:function(){var e=this;this.listLoading=!0,Object(l["o"])(this.listQuery).then(function(t){var a=JSON.parse(t.data.Content);e.list=a.rows,e.total=a.total,setTimeout(function(){e.listLoading=!1},1e3)})},getDetailList:function(){var e=this;this.listDetailLoading=!0,Object(l["k"])(this.listDetailQuery).then(function(t){var a=JSON.parse(t.data.Content);e.detailTotal=a.total,e.detailList=a.rows.map(function(t){return e.$set(t,"edit",!1),e.$set(t,"OriginalCheckedQuantity",0),t.OriginalCheckedQuantity=t.CheckedQuantity,t}),setTimeout(function(){e.listDetailLoading=!1},1e3)})},handleFilter:function(){this.listQuery.Page=1,this.getList()},handleSizeChange:function(e){this.listQuery.Rows=e,this.getList()},handleCurrentChange:function(e){this.listQuery.Page=e,this.getList()},handleDetailFilter:function(){this.listDetailQuery.Page=1,this.getDetailList()},handleDetailSizeChange:function(e){this.listDetailQuery.Rows=e,this.getDetailList()},handleDetailCurrentChange:function(e){this.listDetailQuery.Page=e,this.getDetailList()},handleCreate:function(){var e=this;this.resetCheck(),this.areaList=[],this.dialogStatus="create",this.dialogFormVisible=!0,this.$nextTick(function(){e.$refs["dataForm"].clearValidate()})},createData:function(){var e=this;this.$refs["dataForm"].validate(function(t){t&&(e.$message({title:"成功",message:e.Check.AreaCodes,type:"success",duration:2e3}),Object(l["h"])(e.Check).then(function(t){var a=JSON.parse(t.data.Content);a.Success?(e.dialogFormVisible=!1,e.getList(),e.$message({title:"成功",message:"创建成功",type:"success",duration:2e3})):e.$message({title:"失败",message:"创建失败："+a.Message,type:"error",duration:2e3})}))})},handleUpdate:function(e){var t=this;this.Check=Object.assign({},e),0===this.Check.Status?(this.dialogStatus="update",this.dialogFormVisible=!0,this.$nextTick(function(){t.$refs["dataForm"].clearValidate()})):this.$message({title:"失败",message:"盘点单"+this.Check.Code+"执行中或已完成",type:"error",duration:2e3})},updateData:function(){var e=this;this.$refs["dataForm"].validate(function(t){if(t){var a=Object.assign({},e.Check);Object(l["j"])(a).then(function(t){var a=JSON.parse(t.data.Content);if(a.Success){var i=!0,n=!1,l=void 0;try{for(var o,s=e.list[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){var r=o.value;if(r.Id===e.Check.Id){var c=e.list.indexOf(r);e.list.splice(c,1,e.Check);break}}}catch(u){n=!0,l=u}finally{try{i||null==s.return||s.return()}finally{if(n)throw l}}e.dialogFormVisible=!1,e.$message({title:"成功",message:"更新成功",type:"success",duration:2e3})}else e.$message({title:"成功",message:"创建失败："+a.Message,type:"error",duration:2e3})})}})},handleCancel:function(e){var t=this;this.$confirm("此操作将永久作废该盘点单, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.Check=Object.assign({},e),t.canCelData(t.Check)}).catch(function(){t.$message({type:"info",message:"已取消作废"})}),this.$nextTick(function(){t.$refs["dataForm"].clearValidate()})},canCelData:function(e){var t=this;7!==e.Status?6!==e.Status?Object(l["f"])(e).then(function(e){var a=JSON.parse(e.data.Content);a.Success?(t.dialogFormVisible=!1,t.$message({title:"成功",message:"作废成功",type:"success",duration:2e3}),t.getList()):t.$message({title:"成功",message:"作废失败"+a.Message,type:"error",duration:2e3})}):this.$message({title:"提示",message:"该盘点单"+e.Code+"，已提交。",type:"warning",duration:2e3}):this.$message({title:"提示",message:"该盘点单"+e.Code+"，已作废。",type:"warning",duration:2e3})},resetCheck:function(){this.Check={Id:void 0,Code:"",CheckDict:"",WareHosueCode:"",IsDeleted:!1,StartTime:0,EndTime:"",Status:"",Remark:"",CreatedTime:void 0,CreatedUserCode:"",CreatedUserName:"",AreaCodes:void 0}},cancelDetailEdit:function(e){e.CheckedQuantity=e.OriginalCheckedQuantity,e.edit=!1},confirmDetailEdit:function(e){var t=this;e.edit=!1;var a=parseFloat(e.CheckedQuantity);if(isNaN(a)||"Nan"===a)return this.$message({message:"盘点重量(g)必须为数值",type:"error"}),e.CheckedQuantity=e.OriginalCheckedQuantity,void(e.edit=!0);Object(l["q"])(e).then(function(a){var i=JSON.parse(a.data.Content);i.Success?(t.getDetailList(),t.getList(),t.$message({title:"成功",message:"盘点成功",type:"success",duration:2e3})):(e.CheckdQuantity=e.OriginalPickedQuantity,e.edit=!0,t.$message({title:"失败",message:"盘点失败:"+i.Message,type:"error",duration:2e3}))})},HandDetailEdit:function(e){0!==e.Status&&5!==e.Status||(e.edit=!e.edit)},closeHandCheck:function(){this.dialogDetial=!1,this.getList()},handleDetail:function(e){this.Check=Object.assign({},e),this.dialogDetial=!0,this.listDetailQuery.CheckCode=e.Code,this.listDetailQuery.WareHouseCode=e.WareHouseCode,this.getDetailList()},handleSubmit:function(e){var t=this;Object(l["s"])(e).then(function(e){var a=JSON.parse(e.data.Content);a.Success?(t.getList(),t.$message({title:"成功",message:"提交盘点单成功",type:"success",duration:2e3})):t.$message({title:"失败",message:"提交盘点单失败:"+a.Message,type:"error",duration:2e3})})},remoteMethod:function(e){var t=this;""!==e?(this.locationLoading=!0,Object(l["m"])(e,this.listDetailQuery.WareHouseCode).then(function(e){var a=JSON.parse(e.data.Content);t.locationList=a}),setTimeout(function(){t.locationLoading=!1},200)):this.locationList=[]},locationSelectChange:function(e){this.listDetailQuery.LocationCode=e,this.getDetailList()},handleCreateDetail:function(){var e=this;this.restCheckDetail(),this.dialogFormDetail=!0,this.$nextTick(function(){e.$refs["detailDataForm"].clearValidate()})},createDetailData:function(){var e=this;0!==this.CheckDetail.Quantity&&"0"!==this.CheckDetail.Quantity&&"0.0"!==this.CheckDetail.Quantity&&"0.00"!==this.CheckDetail.Quantity&&"00"!==this.CheckDetail.Quantity&&"000"!==this.CheckDetail.Quantity&&"0000"!==this.CheckDetail.Quantity&&"00000"!==this.CheckDetail.Quantity?0!==this.CheckDetail.CheckedQuantity&&"0"!==this.CheckDetail.CheckedQuantity&&"0.0"!==this.CheckDetail.CheckedQuantity&&"0.00"!==this.CheckDetail.CheckedQuantity&&"00"!==this.CheckDetail.CheckedQuantity&&"000"!==this.CheckDetail.CheckedQuantity&&"0000"!==this.CheckDetail.CheckedQuantity&&"00000"!==this.CheckDetail.CheckedQuantity?Object(r["c"])(this.CheckDetail.Quantity)?Object(r["c"])(this.CheckDetail.CheckedQuantity)?this.$refs["detailDataForm"].validate(function(t){t&&Object(l["i"])(e.CheckDetail).then(function(t){var a=JSON.parse(t.data.Content);a.Success?(e.dialogFormDetail=!1,e.getDetailList(),e.$message({title:"成功",message:"创建成功",type:"success",duration:2e3})):e.$message({title:"失败",message:"创建失败："+a.Message,type:"error",duration:2e3})})}):this.$message({title:"成功",message:"请输入正确格式的盘点重量(g)（包含两位小数的数字或者不包含小数的数字）",type:"error",duration:2e3}):this.$message({title:"成功",message:"请输入正确格式的重量(g)（包含两位小数的数字或者不包含小数的数字）",type:"error",duration:2e3}):this.$message({title:"成功",message:"请输入盘点重量(g)",type:"error",duration:2e3}):this.$message({title:"成功",message:"请输入重量(g)",type:"error",duration:2e3})},handleAgain:function(e){var t=this;4===e.Status?Object(l["g"])(e).then(function(e){var a=JSON.parse(e.data.Content);a.Success?(t.getList(),t.$message({title:"成功",message:"重盘成功",type:"success",duration:2e3})):t.$message({title:"失败",message:"重盘失败:"+a.Message,type:"error",duration:2e3})}):this.$message({title:"失败",message:"盘点完成的盘点单才允许重盘",type:"error",duration:2e3})},restCheckDetail:function(){this.CheckDetail={Id:void 0,CheckCode:this.Check.Code,IsDeleted:!1,Quantity:0,CheckedQuantity:0,MaterialCode:"",WareHouseCode:this.Check.WareHouseCode,AreaCode:"",LocationCode:"",MaterialLabel:"",BatchCode:"",Checker:"",CheckedTime:void 0,Status:4,ManufactureDate:""}},remoteMaterialMethod:function(e){var t=this;""!==e?(this.materialLoading=!0,Object(l["n"])(e).then(function(e){var a=JSON.parse(e.data.Content);t.materialList=a}),setTimeout(function(){t.materialLoading=!1},200)):this.materialList=[]},getCheckAreaList:function(e){var t=this;Object(l["c"])(e).then(function(e){var a=JSON.parse(e.data.Content);t.checkAreaList=a})},handleSend:function(e){this.getCheckAreaList(e.Code),this.dialogFormArea=!0},wareHouseCodeChange:function(e){var t=this;Object(l["d"])(e).then(function(e){var a=JSON.parse(e.data.Content);t.areaList=a})},areaChange:function(e){this.$set(this.Check,"AreaCodes",e),this.$message({title:"失败",message:e,type:"error",duration:2e3})},timer:function(){},CheckAreaStart:function(e){this.CheckedAreaList=e},CheckAreaEnable:function(e,t){return 6!==e.Status&&7!==e.Status},handleAreaStart:function(){var e=this;this.CheckedAreaList.length>0?this.$confirm("确定启动勾选的区域?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(l["b"])(e.CheckedAreaList).then(function(t){var a=JSON.parse(t.data.Content);if(a.Success){e.dialogFormVisible=!1,e.$message({title:"成功",message:"区域启动成功",type:"success",duration:2e3});var i=e.CheckedAreaList[0];e.getCheckAreaList(i.CheckCode)}else e.$message({title:"失败",message:"区域启动失败"+a.Message,type:"error",duration:2e3})})}):this.$message({title:"失败",message:"尚未勾选区域",type:"error",duration:2e3})},handleAreaFinish:function(){var e=this;this.CheckedAreaList.length>0?this.$confirm("确定完成勾选的区域?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(l["a"])(e.CheckedAreaList).then(function(t){var a=JSON.parse(t.data.Content);if(a.Success){e.$message({title:"成功",message:"区域完成成功",type:"success",duration:2e3});var i=e.CheckedAreaList[0];e.getCheckAreaList(i.CheckCode)}else e.$message({title:"失败",message:"区域完成失败"+a.Message,type:"error",duration:2e3})})}):this.$message({title:"失败",message:"尚未勾选区域",type:"error",duration:2e3})}}},u=c,d=a("2877"),h=Object(d["a"])(u,i,n,!1,null,null,null);t["default"]=h.exports},"4c65":function(e,t,a){"use strict";a.d(t,"o",function(){return n}),a.d(t,"k",function(){return l}),a.d(t,"h",function(){return o}),a.d(t,"r",function(){return s}),a.d(t,"j",function(){return r}),a.d(t,"f",function(){return c}),a.d(t,"s",function(){return u}),a.d(t,"q",function(){return d}),a.d(t,"l",function(){return h}),a.d(t,"m",function(){return p}),a.d(t,"p",function(){return g}),a.d(t,"g",function(){return f}),a.d(t,"n",function(){return C}),a.d(t,"i",function(){return m}),a.d(t,"d",function(){return v}),a.d(t,"c",function(){return k}),a.d(t,"a",function(){return y}),a.d(t,"b",function(){return b}),a.d(t,"e",function(){return _});var i=a("b775");function n(e){return Object(i["a"])({url:"api/Check/GetPageRecords",method:"get",params:e})}function l(e){return Object(i["a"])({url:"api/Check/GetCheckDetailPageRecords",method:"get",params:e})}function o(e){return Object(i["a"])({url:"api/Check/PostDoCreate",method:"post",data:e})}function s(e){return Object(i["a"])({url:"api/Check/PostDoCreateCheck",method:"post",data:e})}function r(e){return Object(i["a"])({url:"api/Check/PostDoEdit",method:"post",data:e})}function c(e){return Object(i["a"])({url:"api/Check/PostDoCancel",method:"post",data:e})}function u(e){return Object(i["a"])({url:"api/Check/PostDoSubmit",method:"post",data:e})}function d(e){return Object(i["a"])({url:"api/Check/PostDoHandCheck",method:"post",data:e})}function h(e){return Object(i["a"])({url:"api/Dictionary/GetDictionaryByType",method:"get",params:{type:e}})}function p(e,t){return Object(i["a"])({url:"api/Check/GetLocationList",method:"get",params:{query:e,WareHouseCode:t}})}function g(e){return Object(i["a"])({url:"api/Check/GetWareHouseList",method:"get",params:e})}function f(e){return Object(i["a"])({url:"api/Check/PostDoCheckAgain",method:"post",data:e})}function C(e){return Object(i["a"])({url:"api/Check/GetMaterialList",method:"get",params:{keyValue:e}})}function m(e){return Object(i["a"])({url:"api/Check/PostDoCreateDetail",method:"post",data:e})}function v(e){return Object(i["a"])({url:"api/Check/GetWareHouseAreaList",method:"get",params:{WareHouseCode:e}})}function k(e){return Object(i["a"])({url:"api/Check/GetCheckAreaList",method:"get",params:{CheckCode:e}})}function y(e){return Object(i["a"])({url:"api/Check/CheckTaskDoFinish",method:"post",data:e})}function b(e){return Object(i["a"])({url:"api/Check/CheckTaskDoStart",method:"post",data:e})}function _(e){return Object(i["a"])({url:"api/Check/PostPDACheckComplete",method:"post",data:e})}},"5c83":function(e,t,a){"use strict";a("a481"),a("6762"),a("2fdb");var i={bind:function(e,t,a){var i=e.querySelector(".el-dialog__header"),n=e.querySelector(".el-dialog");i.style.cssText+=";cursor:move;",n.style.cssText+=";top:0px;";var l=function(){return window.document.currentStyle?function(e,t){return e.currentStyle[t]}:function(e,t){return getComputedStyle(e,!1)[t]}}();i.onmousedown=function(e){var t=e.clientX-i.offsetLeft,o=e.clientY-i.offsetTop,s=n.offsetWidth,r=n.offsetHeight,c=document.body.clientWidth,u=document.body.clientHeight,d=n.offsetLeft,h=c-n.offsetLeft-s,p=n.offsetTop,g=u-n.offsetTop-r,f=l(n,"left"),C=l(n,"top");f.includes("%")?(f=+document.body.clientWidth*(+f.replace(/\%/g,"")/100),C=+document.body.clientHeight*(+C.replace(/\%/g,"")/100)):(f=+f.replace(/\px/g,""),C=+C.replace(/\px/g,"")),document.onmousemove=function(e){var i=e.clientX-t,l=e.clientY-o;-i>d?i=-d:i>h&&(i=h),-l>p?l=-p:l>g&&(l=g),n.style.cssText+=";left:".concat(i+f,"px;top:").concat(l+C,"px;"),a.child.$emit("dragDialog")},document.onmouseup=function(e){document.onmousemove=null,document.onmouseup=null}}}},n=function(e){e.directive("el-drag-dialog",i)};window.Vue&&(window["el-drag-dialog"]=i,Vue.use(n)),i.install=n;t["a"]=i},6724:function(e,t,a){"use strict";a("8d41");var i="@@wavesContext";function n(e,t){function a(a){var i=Object.assign({},t.value),n=Object.assign({ele:e,type:"hit",color:"rgba(0, 0, 0, 0.15)"},i),l=n.ele;if(l){l.style.position="relative",l.style.overflow="hidden";var o=l.getBoundingClientRect(),s=l.querySelector(".waves-ripple");switch(s?s.className="waves-ripple":(s=document.createElement("span"),s.className="waves-ripple",s.style.height=s.style.width=Math.max(o.width,o.height)+"px",l.appendChild(s)),n.type){case"center":s.style.top=o.height/2-s.offsetHeight/2+"px",s.style.left=o.width/2-s.offsetWidth/2+"px";break;default:s.style.top=(a.pageY-o.top-s.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",s.style.left=(a.pageX-o.left-s.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return s.style.backgroundColor=n.color,s.className="waves-ripple z-active",!1}}return e[i]?e[i].removeHandle=a:e[i]={removeHandle:a},a}var l={bind:function(e,t){e.addEventListener("click",n(e,t),!1)},update:function(e,t){e.removeEventListener("click",e[i].removeHandle,!1),e.addEventListener("click",n(e,t),!1)},unbind:function(e){e.removeEventListener("click",e[i].removeHandle,!1),e[i]=null,delete e[i]}},o=function(e){e.directive("waves",l)};window.Vue&&(window.waves=l,Vue.use(o)),l.install=o;t["a"]=l},"8d41":function(e,t,a){}}]);