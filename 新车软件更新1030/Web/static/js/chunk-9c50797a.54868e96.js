(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9c50797a"],{"322a":function(e,t,a){"use strict";a("4917");var i=null;function n(){return!0}if(n()){var o=document.head||document.getElementsByTagName("head")[0]||document.documentElement,r=document.createElement("script");r.src="http://localhost:18000/CLodopfuncs.js?priority=1",o.insertBefore(r,o.firstChild),r=document.createElement("script"),r.src="http://localhost:18000/CLodopfuncs.js?priority=1",o.insertBefore(r,o.firstChild)}function l(e,t){var a,o="<br><font color='#FF00FF'>打印控件未安装!点击这里<a href='install_lodop32.exe' target='_self'>执行安装</a>,安装后请刷新页面或重新进入。</font>",r="<br><font color='#FF00FF'>打印控件未安装!点击这里<a href='install_lodop64.exe' target='_self'>执行安装</a>,安装后请刷新页面或重新进入。</font>",l="<br><br><font color='#FF00FF'>（注意：如曾安装过Lodop旧版附件npActiveXPLugin,请在【工具】->【附加组件】->【扩展】中先卸它）</font>",s="<br><br><font color='#FF00FF'>(如果此前正常，仅因浏览器升级或重安装而出问题，需重新执行以上安装）</font>",d="<br><font color='#FF00FF'>CLodop云打印服务(localhost本地)未安装启动!点击这里<a href='CLodop_Setup_for_Win32NT.exe' target='_self'>执行安装</a>,安装后请刷新页面。</font>";try{var c=navigator.userAgent.indexOf("MSIE")>=0||navigator.userAgent.indexOf("Trident")>=0;if(n()){try{a=getCLodop()}catch(p){}if(!a&&"complete"!==document.readyState)return void alert("C-Lodop没准备好，请稍后再试！");if(!a)return void(c?document.write(d):document.body.innerHTML=d+document.body.innerHTML);t&&t.parentNode&&t.parentNode.removeChild(t),e&&e.parentNode&&e.parentNode.removeChild(e)}else{var u=c&&navigator.userAgent.indexOf("x64")>=0;if(void 0!=e||void 0!=t?a=c?e:t:null==i?(a=document.createElement("object"),a.setAttribute("width",0),a.setAttribute("height",0),a.setAttribute("style","position:absolute;left:0px;top:-100px;width:0px;height:0px;"),c?a.setAttribute("classid","clsid:2105C259-1E0C-4534-8141-A753534CB4CA"):a.setAttribute("type","application/x-print-lodop"),document.documentElement.appendChild(a),i=a):a=i,null==a||"undefined"==typeof a.VERSION)return navigator.userAgent.indexOf("Chrome")>=0&&(document.body.innerHTML=s+document.body.innerHTML),navigator.userAgent.indexOf("Firefox")>=0&&(document.body.innerHTML=l+document.body.innerHTML),u?document.write(r):c?document.write(o):document.body.innerHTML=o+document.body.innerHTML,a}return a.VERSION<"6.2.2.2"?(n(),a):a}catch(p){alert("getLodop出错:"+p)}}t["a"]=l},3798:function(e,t,a){"use strict";a("28a5");var i=a("322a"),n=function(e,t,a){this.templdatedata=e,this.data=t,this.pagesetting=a,this._databinds=null;try{var n=Object(i["a"])();n.VERSION&&n.CVERSION&&(this.LODOP=getCLodop(),this.load=!0)}catch(o){this.load=!1,this.msg="请安装打印控件,若已安装请运行！"}};n.prototype={get databinds(){if(null==this._databinds)if(this.templdatedata){this._databinds={};for(var e=0;e<this.templdatedata.length;e++){var t=this.templdatedata[e],a=t.data.databind.id;if("atable"==t.type){this._databinds[a]||(this._databinds[a]=[]);for(var i=0;i<t.data.thead.rows.length;i++)for(var n=t.data.thead.rows[i],o=0;o<n.cells.length;o++){var r=n.cells[o];if(r["databind"]&&r["databind"]["id"]){var l=r["databind"]["id"];this._databinds[a].indexOf(l)<0&&this._databinds[a].push(l)}}for(i=0;i<t.data.tbody.rows.length;i++)for(n=t.data.tbody.rows[i],o=0;o<n.cells.length;o++){r=n.cells[o];if(r["databind"]&&r["databind"]["id"]){l=r["databind"]["id"];this._databinds[a].indexOf(l)<0&&this._databinds[a].push(l)}}}else if("atext"==t.type)this._databinds[a]="";else if("achart"==t.type){this._databinds[a]||(this._databinds[a]=[]);for(i=0;i<t.data.xdata.length;i++){var s=t.data.xdata[i];l=s.id;s.show&&this._databinds[a].indexOf(l)<0&&this._databinds[a].push(l)}}else"aimage"==t.type&&(this._databinds[a]="")}}else this._databinds={};return this._databinds}},n.prototype.g_text=function(e){for(var t,a=this.LODOP,i=e.data,n=i.value,o=e.data.databind.id.split("."),r=0;r<o.length;r++)this.data[o[r]]&&(t=this.data[o[r]]);for(var l in t&&""!=t&&(n=t),a.ADD_PRINT_TEXT(i.y+"px",i.x+"px",i.width+"px",i.height+"px",n),a.SET_PRINT_STYLEA(0,"ItemType",i.itemtype),i.style)switch(l){case"color":a.SET_PRINT_STYLEA(0,"FontColor",i.style[l]);break;case"fontFamily":a.SET_PRINT_STYLEA(0,"FontName",i.style[l]);break;case"fontSize":a.SET_PRINT_STYLEA(0,"FontSize",.75*parseInt(i.style[l]));break;case"fontSpacing":a.SET_PRINT_STYLEA(0,"letterSpacing",parseInt(i.style[l]));break;case"fontWeight":a.SET_PRINT_STYLEA(0,"Bold","normal"==i.style[l]?0:1);break;case"fontStyle":a.SET_PRINT_STYLEA(0,"Italic","normal"==i.style[l]?0:1);break;case"textAlign":var s=i.style[l],d=1;"left"==s?d=1:"center"==s?d=2:"right"==s&&(d=3),a.SET_PRINT_STYLEA(0,"Alignment",d);break;case"borderType":a.SET_PRINT_STYLEA(0,"TextFrame",i.style[l]);break;case"VOrient":a.SET_PRINT_STYLEA(0,"VOrient",i.style[l]);break;case"HOrient":a.SET_PRINT_STYLEA(0,"HOrient",i.style[l]);break;default:}},n.prototype.g_table=function(e){for(var t,a=this.LODOP,i=e.data,n=i.databind.id.split("."),o=0;o<n.length;o++)this.data[n[o]]&&(t=this.data[n[o]]);var r=document.createElement("table");i.style.borderType>0&&(r.border=1),2==i.style.borderType&&(r.style.borderCollapse="collapse");for(o=0;o<i.thead.rows.length;o++){var l=i.thead.rows[o];if(!l["unprint"])for(var s=r.insertRow(),d=0;d<l.cells.length;d++){var c=l.cells[d],u=s.insertCell();for(var p in u.innerHTML=c.value,u.style.width=c.width+"px",u.style.height=c.height+"px",c.style)u.style[p]=c.style[p]}}if(r&&t.length)for(o=0;o<t.length;o++){var h=t[o];for(d=0;d<i.tbody.rows.length;d++){l=i.tbody.rows[d];if(!l["unprint"]){s=r.insertRow();for(var f=0;f<l.cells.length;f++){c=l.cells[f],u=s.insertCell();for(var p in u.innerHTML=c.value,u.style.width=c.width+"px",u.style.height=c.height+"px",c.style)u.style[p]=c.style[p];c.databind&&c.databind.id&&""!=c.databind.id&&(u.innerHTML=h[c.databind.id])}}}}var m=r.outerHTML;a.ADD_PRINT_TABLE(i.y+"px",i.x+"px",i.width+"px",i.height+"px",m),a.SET_PRINT_STYLEA(0,"ItemType",4)},n.prototype.g_chart=function(e){for(var t,a=this.LODOP,i=[],n=e.data.databind.id.split("."),o=0;o<n.length;o++)this.data[n[o]]&&(t=this.data[n[o]]);for(o=0;o<e.data.xdata.length;o++){var r=e.data.xdata[o];r.group?i.splice(0,0,r):i.push(r)}var l=document.createElement("table"),s=l.insertRow();for(o=0;o<i.length;o++){r=i[o];var d=s.insertCell();d.innerHTML=r.text}for(o=0;o<t.length;o++)for(var c=t[o],u=l.insertRow(),p=0;p<i.length;p++){r=i[p],d=u.insertCell();d.innerHTML=c[r.id]}var h=l.outerHTML;a.ADD_PRINT_CHART(e.data.y+"px",e.data.x+"px",e.data.width+"px",e.data.height+"px",e.data.charttype,h),a.SET_PRINT_STYLEA(0,"ChartStyle",e.data.printstyle.join("")),a.SET_PRINT_STYLEA(0,"ChartTitle",e.data.charttitle),a.SET_PRINT_STYLEA(0,"ChartFoot",e.data.chartfoot)},n.prototype.g_image=function(e){for(var t,a,i,n=this.LODOP,o=e.data.databind.id.split("."),r=0;r<o.length;r++)this.data[o[r]]&&(t=this.data[o[r]]);e.data.databind.id&&""!=e.data.databind.id?(i=e.data.databindtype,a=t):(i=e.data.style.defaultimgtype,a=e.data.style.defaultimg),1==i&&(a="URL:"+a),n.ADD_PRINT_IMAGE(e.data.y,e.data.x,e.data.width,e.data.height,a),n.SET_PRINT_STYLEA(0,"ItemType",e.data.itemtype),n.SET_PRINT_STYLEA(0,"Stretch",e.data.style.backgroundSize)},n.prototype.print=function(){if(this.load){this.LODOP.PRINT_INIT("sunagy报表设计"),this.pagesetting&&this.LODOP.SET_PRINT_PAGESIZE(this.pagesetting.intOrient,this.pagesetting.width,this.pagesetting.height,this.pagesetting.pagetype);for(var e=0;e<this.templdatedata.length;e++){var t=this.templdatedata[e];t.data;"atext"==t.type?this.g_text.call(this,t):"atable"==t.type?this.g_table.call(this,t):"achart"==t.type?this.g_chart.call(this,t):"aimage"==t.type&&this.g_image.call(this,t)}LODOP.PRINT()}else alert(this.msg)},n.prototype.definedPrint=function(e){if(this.load){this.LODOP.PRINT_INIT("sunagy报表设计"),this.pagesetting&&this.LODOP.SET_PRINT_PAGESIZE(this.pagesetting.intOrient,this.pagesetting.width,this.pagesetting.height,this.pagesetting.pagetype);for(var t=0;t<this.templdatedata.length;t++){var a=this.templdatedata[t];a.data;"atext"==a.type?this.g_text.call(this,a):"atable"==a.type?this.g_table.call(this,a):"achart"==a.type?this.g_chart.call(this,a):"aimage"==a.type&&this.g_image.call(this,a)}console.log(e),LODOP.SET_PRINTER_INDEX(e),LODOP.PRINT()}else alert(this.msg)},t["a"]=n},"53fe":function(e,t,a){"use strict";a.d(t,"c",function(){return n}),a.d(t,"d",function(){return o}),a.d(t,"b",function(){return r}),a.d(t,"a",function(){return l});var i=a("b775");function n(e){return Object(i["a"])({url:"api/MouldInformation/GetPageRecords",method:"get",params:e})}function o(e){return Object(i["a"])({url:"api/MouldInformation/PostDoEdit",method:"post",data:e})}function r(e){return Object(i["a"])({url:"api/MouldInformation/PostDoCreate",method:"post",data:e})}function l(e){return Object(i["a"])({url:"api/MouldInformation/PostDoDelete",method:"post",data:{id:e.Id}})}},"5c83":function(e,t,a){"use strict";a("a481"),a("6762"),a("2fdb");var i={bind:function(e,t,a){var i=e.querySelector(".el-dialog__header"),n=e.querySelector(".el-dialog");i.style.cssText+=";cursor:move;",n.style.cssText+=";top:0px;";var o=function(){return window.document.currentStyle?function(e,t){return e.currentStyle[t]}:function(e,t){return getComputedStyle(e,!1)[t]}}();i.onmousedown=function(e){var t=e.clientX-i.offsetLeft,r=e.clientY-i.offsetTop,l=n.offsetWidth,s=n.offsetHeight,d=document.body.clientWidth,c=document.body.clientHeight,u=n.offsetLeft,p=d-n.offsetLeft-l,h=n.offsetTop,f=c-n.offsetTop-s,m=o(n,"left"),g=o(n,"top");m.includes("%")?(m=+document.body.clientWidth*(+m.replace(/\%/g,"")/100),g=+document.body.clientHeight*(+g.replace(/\%/g,"")/100)):(m=+m.replace(/\px/g,""),g=+g.replace(/\px/g,"")),document.onmousemove=function(e){var i=e.clientX-t,o=e.clientY-r;-i>u?i=-u:i>p&&(i=p),-o>h?o=-h:o>f&&(o=f),n.style.cssText+=";left:".concat(i+m,"px;top:").concat(o+g,"px;"),a.child.$emit("dragDialog")},document.onmouseup=function(e){document.onmousemove=null,document.onmouseup=null}}}},n=function(e){e.directive("el-drag-dialog",i)};window.Vue&&(window["el-drag-dialog"]=i,Vue.use(n)),i.install=n;t["a"]=i},7565:function(e,t,a){"use strict";a.d(t,"d",function(){return n}),a.d(t,"c",function(){return o}),a.d(t,"e",function(){return r}),a.d(t,"a",function(){return l}),a.d(t,"f",function(){return s}),a.d(t,"g",function(){return d}),a.d(t,"h",function(){return c}),a.d(t,"b",function(){return u});var i=a("b775");function n(e){return Object(i["a"])({url:"api/ReceiveTask/GetPageRecords",method:"get",params:e})}function o(e){return Object(i["a"])({url:"api/ReceiveTask/GetReceiveTaskDetailList",method:"get",params:{Code:e}})}function r(){return Object(i["a"])({url:"api/ReceiveTask/GetWareHouseList",method:"get"})}function l(e){return Object(i["a"])({url:"api/ReceiveTask/PostDoDelete",method:"post",data:e})}function s(e){return Object(i["a"])({url:"api/ReceiveTask/PostDoCreate",method:"post",data:e})}function d(e){return Object(i["a"])({url:"api/ReceiveTask/PostHandShelfReceiveTask",method:"post",data:e})}function c(e){return Object(i["a"])({url:"api/ReceiveTask/PostReturn",method:"post",data:e})}function u(e){return Object(i["a"])({url:"api/ReceiveTask/GetHistoryPageRecords",method:"get",params:e})}},ac44:function(e,t,a){"use strict";a.d(t,"d",function(){return n}),a.d(t,"b",function(){return o}),a.d(t,"c",function(){return r}),a.d(t,"e",function(){return l}),a.d(t,"a",function(){return s});var i=a("b775");function n(e){return Object(i["a"])({url:"api/Label/GetPageRecords",method:"get",params:e})}function o(e){return Object(i["a"])({url:"api/Label/PostDoCreate",method:"post",data:e})}function r(e){return Object(i["a"])({url:"api/Label/GetLabelByCode",method:"get",params:{code:e}})}function l(e){return Object(i["a"])({url:"api/Label/PostQueryHistoryLabel",method:"post",data:e})}function s(e){return Object(i["a"])({url:"api/Label/PostDoCreateBatchLabel",method:"post",data:e})}},bc4f:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-card",{staticClass:"search-card"},[a("div",{staticClass:"filter-container",staticStyle:{"margin-bottom":"10px"}},[a("el-input",{staticClass:"filter-item",attrs:{placeholder:"领用单号",clearable:""},on:{clear:e.handleFilter},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleFilter(t)}},model:{value:e.listQuery.Code,callback:function(t){e.$set(e.listQuery,"Code",t)},expression:"listQuery.Code"}}),e._v(" "),a("el-select",{attrs:{multiple:!1,filterable:"",remote:"","reserve-keyword":""},on:{change:e.handleFilter},model:{value:e.listQuery.Status,callback:function(t){e.$set(e.listQuery,"Status",t)},expression:"listQuery.Status"}},e._l(e.statusList,function(e){return a("el-option",{key:e.Code,attrs:{label:e.Name,value:e.Code}})}),1),e._v(" "),a("el-button",{staticClass:"filter-button",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleFilter}},[e._v("查询")]),e._v(" "),a("el-button",{staticClass:"filter-button",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.handleCreate}},[e._v("添加")]),e._v(" "),a("el-button",{staticClass:"filter-button",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.handleInterfaceCreate}},[e._v("同步")]),e._v(" "),a("el-upload",{ref:"fileupload",staticStyle:{display:"inline","margin-left":"10px","margin-right":"10px"},attrs:{action:"#","show-file-list":!1,"http-request":e.uploadFile,"before-upload":e.beforeUpload,"on-exceed":e.handleExceed}},[a("el-button",{attrs:{type:"primary"}},[a("i",{staticClass:"el-icon-upload"}),e._v("  导入")])],1),e._v(" "),a("el-button",{staticClass:"filter-button",attrs:{loading:e.downloadLoading,type:"primary",icon:"el-icon-download"},on:{click:e.handleDownUpload}},[e._v("模板")])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],key:e.TableKey,staticStyle:{width:"100%","min-height":"100%"},attrs:{data:e.list,"header-cell-style":{background:"#F5F7FA"},size:"mini",height:"331",border:"",fit:"","highlight-current-row":""},on:{"row-click":e.handleRowClick}},[a("el-table-column",{attrs:{type:"index",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{label:"状态",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.Status?a("el-tag",{attrs:{type:"warning"}},[a("span",[e._v(e._s(t.row.StateDescription))])]):e._e(),e._v(" "),1===t.row.Status?a("el-tag",[a("span",[e._v(e._s(t.row.StateDescription))])]):e._e(),e._v(" "),2===t.row.Status?a("el-tag",{attrs:{type:"success"}},[a("span",[e._v(e._s(t.row.StateDescription))])]):e._e(),e._v(" "),3===t.row.Status?a("el-tag",{attrs:{type:"info"}},[a("span",[e._v(e._s(t.row.StateDescription))])]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"领用单号",width:"140",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.Code))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"领用类型",width:"70",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.ReceiveTypeDescription))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"领用人",width:"100",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.ReceiveUserName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"领用时间",width:"135",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.LastTimeReceiveDatetime))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"预计归还时间",width:"135",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.PredictReturnTime))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"来源单据",width:"150",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.BillCode))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"领用备注",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.Remarks))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"添加信息",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.CreatedUserName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"添加时间",width:"135",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.CreatedTime))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"200px","class-name":"small-padding fixed-width",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.handleUpdate(t.row)}}}),e._v(" "),a("el-button",{attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(a){return e.handleDelete(t.row)}}}),e._v(" "),a("el-button",{staticStyle:{width:"50px"},attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.chosePrint(t.row)}}},[e._v("下发")]),e._v(" "),a("el-button",{staticStyle:{width:"50px"},attrs:{size:"mini",type:"info"},on:{click:function(a){return e.cancellation(t.row)}}},[e._v("作废")])]}}])})],1),e._v(" "),a("div",{staticClass:"pagination-container"},[a("el-pagination",{attrs:{"current-page":e.listQuery.Page,"page-sizes":[6,12,18,24],"page-size":e.listQuery.Rows,total:e.total,background:"",layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),a("el-card",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:!1,expression:"false"}],key:e.TableKey,staticStyle:{width:"100%","min-height":"100%"},attrs:{data:e.listMaterial,"header-cell-style":{background:"#F5F7FA"},height:300,size:"mini",border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{type:"index",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{label:"状态",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.Status?a("el-tag",{attrs:{size:"mini",type:"warning"}},[a("span",[e._v(e._s(t.row.StateDescription))])]):e._e(),e._v(" "),1===t.row.Status?a("el-tag",{attrs:{size:"mini"}},[a("span",[e._v(e._s(t.row.StateDescription))])]):e._e(),e._v(" "),2===t.row.Status?a("el-tag",{attrs:{size:"mini",type:"success"}},[a("span",[e._v(e._s(t.row.StateDescription))])]):e._e(),e._v(" "),3===t.row.Status?a("el-tag",{attrs:{size:"mini",type:"info"}},[a("span",[e._v(e._s(t.row.StateDescription))])]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"领用类型",width:"70","aligill-coden":"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.ReceiveTypeDescription))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"模具描述",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.Remarks))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"领用重量(g)",width:"100",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.Quantity))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"模具条码",width:"200",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.MaterialLabel))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"模具编码",width:"200",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.MaterialCode))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"储位",width:"150",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.LocationCode))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"x轴",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.XLight))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"Y轴",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.YLight))])]}}])})],1)],1),e._v(" "),a("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.textMap[e.dialogStatus],visible:e.dialogFormVisible,width:"80%","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"dataForm",staticClass:"dialog-form",attrs:{rules:e.rules,model:e.Receive,"label-width":"100px","label-position":"left"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"仓库编码",prop:"WareHouseCode"}},[a("el-select",{staticStyle:{width:"300px"},attrs:{multiple:!1,filterable:""},model:{value:e.Receive.WareHouseCode,callback:function(t){e.$set(e.Receive,"WareHouseCode",t)},expression:"Receive.WareHouseCode"}},e._l(e.WareHouseList,function(e){return a("el-option",{key:e.Code,attrs:{label:e.Name,value:e.Code}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"领用类型",prop:"ReceiveType"}},[a("el-select",{staticStyle:{width:"300px"},attrs:{multiple:!1,"reserve-keyword":""},model:{value:e.Receive.ReceiveType,callback:function(t){e.$set(e.Receive,"ReceiveType",t)},expression:"Receive.ReceiveType"}},e._l(e.typeList,function(e){return a("el-option",{key:e.Code,attrs:{label:e.Name,value:e.Code}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"来源单号",prop:"DesignCode"}},[a("el-input",{staticClass:"dialog-input",attrs:{clearable:"",placeholder:"请输入来源单据号"},model:{value:e.Receive.DesignCode,callback:function(t){e.$set(e.Receive,"DesignCode",t)},expression:"Receive.DesignCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"具体描述"}},[a("el-input",{staticClass:"dialog-input",attrs:{autosize:{minRows:1,maxRows:1},type:"textarea",placeholder:"领用描述"},model:{value:e.Receive.Remarks,callback:function(t){e.$set(e.Receive,"Remarks",t)},expression:"Receive.Remarks"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"领用人",prop:"LastTimeReceiveName"}},[a("el-select",{staticStyle:{width:"300px"},attrs:{multiple:!1,filterable:""},model:{value:e.Receive.LastTimeReceiveName,callback:function(t){e.$set(e.Receive,"LastTimeReceiveName",t)},expression:"Receive.LastTimeReceiveName"}},e._l(e.UserInfoList,function(e){return a("el-option",{key:e.Code,attrs:{label:e.Name,value:e.Code}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"领用时间",prop:"LastTimeReceiveDatetime"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"请选择领用时间","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.Receive.LastTimeReceiveDatetime,callback:function(t){e.$set(e.Receive,"LastTimeReceiveDatetime",t)},expression:"Receive.LastTimeReceiveDatetime"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"预计归还时间",prop:"PredictReturnTime"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"请选择预计归还时间","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.Receive.PredictReturnTime,callback:function(t){e.$set(e.Receive,"PredictReturnTime",t)},expression:"Receive.PredictReturnTime"}})],1)],1)],1)],1),e._v(" "),a("div",{staticStyle:{"margin-bottom":"20px"},attrs:{align:"right"}},[a("el-button",{staticClass:"filter-button",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.handleCreateOutMaterial}},[e._v("添加")]),e._v(" "),a("el-button",{staticClass:"filter-button",staticStyle:{"margin-left":"10px"},attrs:{type:"danger",icon:"el-icon-delete"},on:{click:e.handleDeleteOutMaterial}},[e._v("移除")])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:!1,expression:"false"}],key:e.TableKey,ref:"addMaterialGrid",staticStyle:{width:"100%","min-height":"100%"},attrs:{data:e.addMaterial,"header-cell-style":{background:"#F5F7FA"},border:"",fit:"","highlight-current-row":"",height:"300px"},on:{"row-click":e.addMaterialGridClick}},[a("el-table-column",{attrs:{type:"index",width:"50","reserve-selection":!0}}),e._v(" "),a("el-table-column",{attrs:{label:"模具条码",width:"190",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.MaterialLabel))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"模具名称",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.MaterialName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"储位",width:"180",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.LocationCode))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"上次领用人",width:"140",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.LastTimeReceiveName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"上次领用时间",width:"190","show-overflow-tooltip":"",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.LastTimeReceiveDatetime))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"上次领用类别",width:"145",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.ReceiveTypeDescription))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"重量(g)",width:"145",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.Quantity))])]}}])})],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")]),e._v(" "),"create"==e.dialogStatus?a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.createData(e.addMaterial)}}},[e._v("确认")]):a("el-button",{attrs:{type:"primary"},on:{click:e.updateData}},[e._v("确认")])],1)],1),e._v(" "),a("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{visible:e.addMould,width:"95%","close-on-click-modal":!1},on:{"update:visible":function(t){e.addMould=t}}},[a("el-row",[a("el-card",[a("div",{staticClass:"filter-container",staticStyle:{"margin-bottom":"20px"}},[a("el-input",{staticClass:"filter-item",attrs:{placeholder:"模具名称",clearable:""},on:{clear:e.handleFilterAdd},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleFilterAdd(t)}},model:{value:e.AddlistQuery.MaterialLabel,callback:function(t){e.$set(e.AddlistQuery,"MaterialLabel",t)},expression:"AddlistQuery.MaterialLabel"}}),e._v(" "),a("el-button",{staticClass:"filter-button",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleFilterAdd}},[e._v("查询")])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],key:e.TableKey,ref:"multipleTable",staticStyle:{width:"100%","min-height":"100%"},attrs:{data:e.addList,"header-cell-style":{background:"#F5F7FA"},size:"mini","highlight-current-row":"",border:"",fit:"","row-key":e.getRowKeys},on:{"selection-change":e.changeFun}},[a("el-table-column",{attrs:{type:"selection","reserve-selection":!0,width:"50",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{type:"index",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{label:"状态",width:"90",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.MouldState?a("el-tag",{attrs:{type:"primary"}},[a("span",[e._v(e._s(t.row.StateDescription))])]):e._e(),e._v(" "),1===t.row.MouldState?a("el-tag",{attrs:{type:"warning"}},[a("span",[e._v(e._s(t.row.StateDescription))])]):e._e(),e._v(" "),2===t.row.MouldState?a("el-tag",{attrs:{type:"info"}},[a("span",[e._v(e._s(t.row.StateDescription))])]):e._e(),e._v(" "),3===t.row.MouldState?a("el-tag",{attrs:{type:"info"}},[a("span",[e._v(e._s(t.row.StateDescription))])]):e._e(),e._v(" "),4===t.row.MouldState?a("el-tag",{attrs:{type:"success"}},[a("span",[e._v(e._s(t.row.StateDescription))])]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"物料编码",width:"110",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.MaterialCode))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"模具条码",width:"140",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.MaterialLabel))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"模具名称",width:"110",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.MaterialName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"上次领用人",width:"100",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.LastTimeReceiveName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"上次领用时间",width:"150","show-overflow-tooltip":"",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.LastTimeReceiveDatetime))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"上次领用类别",width:"110",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.ReceiveTypeDescription))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"备注",width:"130",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.Remarks))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"领用时长",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.ReceiveTime))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"上次归还人",width:"100",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.LastTimeReturnName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"上次归还时间",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.LastTimeReturnDatetime))])]}}])})],1),e._v(" "),a("div",{staticClass:"pagination-container"},[a("el-pagination",{attrs:{"current-page":e.AddlistQuery.Page,"page-sizes":[5,10,15,20],"page-size":e.AddlistQuery.Rows,total:e.Addtotal,background:"",layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChangeAdd,"current-change":e.handleCurrentChangeAdd}})],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{align:"right"}},[a("el-button",{on:{click:function(t){e.addMould=!1}}},[e._v("取消")]),e._v(" "),"create"==e.dialogStatus?a("el-button",{attrs:{type:"primary"},on:{click:e.toggleSelection}},[e._v("确认")]):a("el-button",{attrs:{type:"primary"},on:{click:e.UpdatetoggleSelection}},[e._v("确认")])],1)],1)],1)],1)],1)},n=[],o=(a("ac6a"),a("b775"));function r(e){return Object(o["a"])({url:"api/Receive/GetPageRecords",method:"get",params:e})}function l(e){return Object(o["a"])({url:"api/Receive/GetReceiveMaterialList",method:"get",params:{Code:e}})}function s(e){return Object(o["a"])({url:"api/Receive/PostDoCreate",method:"post",data:e})}function d(){return Object(o["a"])({url:"api/Receive/GetWareHouseList",method:"get"})}function c(e){return Object(o["a"])({url:"api/Receive/PostDoDelete",method:"post",data:e})}function u(e){return Object(o["a"])({url:"api/Receive/PostDoUpdate",method:"post",data:e})}function p(e){return Object(o["a"])({url:"api/Receive/PostDoCancellatione",method:"post",data:e})}function h(e){return Object(o["a"])({url:"api/Receive/DoUpLoadInInfo",method:"post",data:e})}function f(e){return Object(o["a"])({url:"api/Receive/GetInterfaceReceive",method:"get"})}var m=a("5c83"),g=a("322a"),v=a("61f7"),b=a("3798"),y=a("ac44"),_=a("cbe9"),w=a("7565"),S=a("53fe"),R={name:"Receive",directives:{elDragDialog:m["a"]},data:function(){var e=this,t=function(t,a,i){""===e.Label.Code||null===e.Label.Code?i(new Error("请扫描条码")):i()},a=function(t,a,i){Object(v["c"])(e.InMaterial.Quantity)?i():i(new Error("请输入正确的数字"))};return{multipleSelection:[],SelectData:[],rowData:null,barcodeValue:"test",total:null,Addtotal:null,listLoading:!1,listQuery:{Page:1,Rows:6,Code:"",Status:void 0,Sort:"id"},AddlistQuery:{Page:1,Rows:5,MaterialLabel:"",MouldState:4,Sort:"id",Code:"",WareHouseCode:""},OptionList:[],OptionObject:{Name:"",value:0},dictionaryList:[],downloadLoading:!1,dialogPrinterVisible:!1,addMould:!1,TableKey:0,list:null,addList:null,listMaterial:null,addMaterial:[],addMouldList:[],dialogFormVisible:!1,printerList:[],dialogStatus:"",materialList:[],editMaterialList:[],loading:!1,addMaterialGridCurrentRowIndex:void 0,textMap:{update:"编辑领用单",create:"创建领用单"},Receive:{Code:"",Quantity:"",Status:"",PredictReturnTime:"",ReceiveType:"",LastTimeReceiveName:"",LastTimeReceiveDatetime:"",ReceiveTime:"",WareHouseCode:"",Remarks:"",DesignCode:"",AddMaterial:[]},ReceiveDetailed:{ReceiveCode:"",MaterialLabel:"",MaterialCode:"",MaterialName:"",Status:"",LastTimeReceiveName:"",LastTimeReceiveDatetime:"",LastTimeReturnName:"",LastTimeReturnDatetime:"",PredictReturnTime:"",LocationCode:"",Quantity:""},PrintCode:"",controls:[],rules:{WareHouseCode:[{required:!0,message:"请选择仓库",trigger:"blur"}],InputBarcode:[{required:!0,validator:t,trigger:"blur"}],InputNumber:[{require:!0,validator:a,trigger:"blur"}]},WareHouseList:[],UserInfoList:[],tempPrintlist:[],printDate:null,page:{width:520,height:350,pagetype:"",intOrient:1},barCode:"",dialogInMaterialVisible:!1,Label:{Code:null,SupplyCode:null,MaterialCode:null,ProductionDate:null,Batchcode:null},supplierList:[],editSupplierList:[],statusList:[{Code:void 0,Name:"全部"},{Code:0,Name:"待执行"},{Code:1,Name:"进行中"},{Code:2,Name:"已完成"},{Code:3,Name:"已作废"}],MouldList:[{Code:void 0,Name:"全部"},{Code:0,Name:"生产"},{Code:1,Name:"修模"},{Code:2,Name:"注销"},{Code:3,Name:"领用锁定"},{Code:4,Name:"在库中"}],typeList:[{Code:0,Name:"生产"},{Code:1,Name:"修模"},{Code:2,Name:"注销"}]}},watch:{dialogInMaterialVisible:function(e){e||this.resstIn()},dialogFormVisible:function(e){e||(this.resstReceive(),this.multipleSelection=[],this.$refs.multipleTable.clearSelection())}},created:function(){this.getList(),this.GetWareHouseList(),this.GetUserInfoList()},destroyed:function(){this.timer&&clearInterval(this.timer)},methods:{GetWareHouseList:function(){var e=this;d().then(function(t){var a=JSON.parse(t.data.Content);e.WareHouseList=a})},GetUserInfoList:function(){var e=this;Object(_["h"])().then(function(t){var a=JSON.parse(t.data.Content);a.forEach(function(t){"admin"!==t.Code&&e.UserInfoList.push(t)})})},getList:function(){var e=this;this.listLoading=!0,r(this.listQuery).then(function(t){var a=JSON.parse(t.data.Content);e.list=a.rows,e.total=a.total,e.list.length>0&&e.handleRowClick(e.list[0]),setTimeout(function(){e.listLoading=!1},1e3)})},handleFilter:function(){this.listQuery.Page=1,this.getList()},handleFilterAdd:function(){this.AddlistQuery.Page=1,this.getAddList()},handleSizeChangeAdd:function(e){this.AddlistQuery.Rows=e,this.getAddList()},handleCurrentChangeAdd:function(e){this.AddlistQuery.Page=e,this.getAddList()},handleSizeChange:function(e){this.listQuery.Rows=e,this.getList()},handleCurrentChange:function(e){this.listQuery.Page=e,this.getList()},handleInterfaceCreate:function(){var e=this;f().then(function(t){var a=JSON.parse(t.data.Content);a.Success?(e.dialogFormVisible=!1,e.getList(),e.handleRowClick(e.Receive),e.$message({title:"成功",message:a.Message,type:"success",duration:2e3})):e.$message({title:"失败",message:"创建失败："+a.Message,type:"error",duration:2e3})})},handleCreate:function(){var e=this;this.dialogStatus="create",this.dialogFormVisible=!0,this.$nextTick(function(){e.$refs["dataForm"].clearValidate()})},changeFun:function(e){this.multipleSelection=e},getRowKeys:function(e){return e.Id},toggleSelection:function(){var e=this;this.addMaterial=[],this.multipleSelection.forEach(function(t){var a=t;a.ReceiveTypeDescription=t.MaterialTypeDescription,e.addMaterial.push(a)}),this.addMould=!1},UpdatetoggleSelection:function(){var e=this;this.addMouldList=[],this.addMouldList=this.multipleSelection,this.addMouldList.forEach(function(t){e.addMaterial.push(t)}),this.addMould=!1},handlePrint:function(e){var t=this;this.PrintCode=e,this.printDate=this.getNowFormatDate(),l(e.Code).then(function(e){var a=JSON.parse(e.data.Content);t.tempPrintlist=a;var i=document.getElementById("printBtn");i.click()})},chosePrint:function(e){var t=this;this.rowData=e,this.Receive=Object.assign({},e),1!==this.Receive.Status?2!==this.Receive.Status?3!==this.Receive.Status?Object(w["f"])(e).then(function(e){var a=JSON.parse(e.data.Content);a.Success?(t.getList(),l(t.Receive.Code).then(function(e){var a=JSON.parse(e.data.Content);t.listMaterial=a}),t.$message({title:"成功",message:"下发成功",type:"success",duration:2e3})):t.$message({title:"失败",message:"下发失败："+a.Message,type:"error",duration:2e3})}):this.$message({title:"失败",message:"领用单"+this.Receive.Code+"已作废",type:"error",duration:2e3}):this.$message({title:"失败",message:"领用单"+this.Receive.Code+"已完成",type:"error",duration:2e3}):this.$message({title:"失败",message:"领用单"+this.Receive.Code+"进行中",type:"error",duration:2e3})},cancellation:function(e){var t=this;this.Receive=Object.assign({},e),2!==this.Receive.Status?p(this.Receive).then(function(e){var a=JSON.parse(e.data.Content);a.Success?(t.getList(),t.$message({title:"成功",message:"作废成功",type:"success",duration:2e3})):t.$message({title:"失败",message:"作废失败："+a.Message,type:"error",duration:2e3})}):this.$message({title:"失败",message:"领用单"+this.Receive.Code+"已完成",type:"error",duration:2e3})},UseDefualtPrint:function(){this.handlePrintCode(this.rowData)},UseDefinedPrint:function(){this.handlePrintCode(this.rowData)},handlePrintCode:function(e){var t=this;if(this.dialogPrinterVisible=!1,this.$message({title:"成功",message:"打印任务已发送，请稍等",type:"success",duration:2e3}),null!==e){for(var a=Object(g["a"])(),i=a.GET_PRINTER_COUNT(),n=0;n<i;n++)this.OptionList[n]=a.GET_PRINTER_NAME(n);var o={};l(e.Code).then(function(e){var a=JSON.parse(e.data.Content);a.forEach(function(e){t.createBarCode(e.MaterialLabel),t.controls.push({id:111,type:"atext",data:{value:e.MaterialCode,width:400,height:20,x:20,y:10,itemtype:0,databind:{id:"",text:""},style:{color:"#000",fontFamily:"宋体",fontSize:"12px",fontSpacing:0,fontWeight:"normal",fontStyle:"normal",textAlign:"left",border:"",borderType:0,HOrient:0,VOrient:0}}}),t.controls.push({id:111,type:"atext",data:{value:e.MaterialName,width:400,height:20,x:20,y:30,itemtype:0,databind:{id:"",text:""},style:{color:"#000",fontFamily:"宋体",fontSize:"12px",fontSpacing:0,fontWeight:"normal",fontStyle:"normal",textAlign:"left",border:"",borderType:0,HOrient:0,VOrient:0}}}),t.controls.push({id:111,type:"atext",data:{value:e.MaterialLabel,width:400,height:20,x:20,y:50,itemtype:0,databind:{id:"",text:""},style:{color:"#000",fontFamily:"宋体",fontSize:"12px",fontSpacing:0,fontWeight:"normal",fontStyle:"normal",textAlign:"left",border:"",borderType:0,HOrient:0,VOrient:0}}}),t.controls.push({id:1,type:"aimage",data:{x:20,y:75,width:400,height:60,itemtype:0,databindtype:0,databind:{id:"",text:""},style:{backgroundSize:0,defaultimgtype:0,defaultimg:t.barCode,HOrient:0,VOrient:0}}});var a=new b["a"](t.controls,o,t.page);if(""!==t.OptionObject.Name)return a.definedPrint(t.OptionObject.Name),void(t.rowData=null);a.print(),t.rowData=null,t.controls=[]})})}else this.$message({title:"失败",message:"请选择需要打印条码的入库单",type:"error",duration:2e3})},handleUpdate:function(e){var t=this;this.Receive=Object.assign({},e),1!==this.Receive.Status?2!==this.Receive.Status?3!==this.Receive.Status?(l(e.Code).then(function(e){var a=JSON.parse(e.data.Content);t.addMouldList=a,t.addMaterial=t.addMouldList}),this.dialogStatus="update",this.dialogFormVisible=!0,this.$nextTick(function(){t.$refs["dataForm"].clearValidate()})):this.$message({title:"失败",message:"领用单"+this.Receive.Code+"已作废",type:"error",duration:2e3}):this.$message({title:"失败",message:"领用单"+this.Receive.Code+"已完成",type:"error",duration:2e3}):this.$message({title:"失败",message:"领用单"+this.Receive.Code+"进行中",type:"error",duration:2e3})},updateData:function(){var e=this;this.$refs["dataForm"].validate(function(t){if(t){e.Receive.AddMaterial=[],e.addMaterial.forEach(function(t){e.Receive.AddMaterial.push(t)});var a=Object.assign({},e.Receive);u(a).then(function(t){var a=JSON.parse(t.data.Content);a.Success?(e.dialogFormVisible=!1,e.getList(),l(e.Receive.Code).then(function(t){var a=JSON.parse(t.data.Content);e.listMaterial=a}),e.$message({title:"成功",message:"更新成功",type:"success",duration:2e3})):e.$message({title:"失败",message:"更新失败："+a.Message,type:"error",duration:2e3})})}})},createData:function(e){var t=this;0!==this.addMaterial.length?this.$refs["dataForm"].validate(function(e){e&&(t.Receive.Status=0,t.Receive.AddMaterial=[],t.addMaterial.forEach(function(e){t.Receive.AddMaterial.push(e)}),s(t.Receive).then(function(e){var a=JSON.parse(e.data.Content);a.Success&&t.i===t.len?(t.dialogFormVisible=!1,t.getList(),t.resstReceive(),t.$message({title:"成功",message:"创建成功",type:"success",duration:2e3})):t.$message({title:"失败",message:"创建失败："+a.Message,type:"error",duration:2e3})}))}):this.$message({title:"提示",message:"请添加需要领用的模具信息",type:"warning",duration:2e3})},handleDelete:function(e){var t=this;this.$confirm("此操作将永久删除该入库单, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.Receive=Object.assign({},e),t.deleteData(t.Receive)}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},deleteData:function(e){var t=this;c(e).then(function(e){var a=JSON.parse(e.data.Content);a.Success?(t.dialogFormVisible=!1,t.$message({title:"成功",message:"删除成功",type:"success",duration:2e3}),t.getList(),l("").then(function(e){var a=JSON.parse(e.data.Content);t.listMaterial=a})):t.$message({title:"成功",message:"删除失败："+a.Message,type:"error",duration:2e3})}),this.resstReceive()},handleRowClick:function(e,t,a){var i=this;l(e.Code).then(function(e){var t=JSON.parse(e.data.Content);i.listMaterial=t})},getAddList:function(){var e=this;this.listLoading=!0,this.AddlistQuery.WareHouseCode=this.Receive.WareHouseCode,Object(S["c"])(this.AddlistQuery).then(function(t){var a=JSON.parse(t.data.Content);e.addList=a.rows,e.Addtotal=a.Addtotal,setTimeout(function(){e.listLoading=!1},1e3)})},handleCreateOutMaterial:function(){""!==this.Receive.WareHouseCode?""!==this.Receive.ReceiveType?""!==this.Receive.LastTimeReceiveName?""!==this.Receive.LastTimeReceiveDatetime?(this.addMould=!0,this.getAddList()):this.$message({title:"提示",message:"请选择领用时间",type:"warning",duration:2e3}):this.$message({title:"提示",message:"请选择领用人",type:"warning",duration:2e3}):this.$message({title:"提示",message:"请选择领用类型",type:"warning",duration:2e3}):this.$message({title:"提示",message:"请选择仓库",type:"warning",duration:2e3})},handleDeleteOutMaterial:function(){void 0!==this.addMaterialGridCurrentRowIndex&&this.addMaterial.splice(this.addMaterial.indexOf(this.addMaterialGridCurrentRowIndex),1)},addMaterialGridClick:function(e,t,a){this.addMaterialGridCurrentRowIndex=e},beforeUpload:function(e){var t="application/vnd.ms-excel"===e.type,a="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"===e.type;return t|a},handleExceed:function(e,t){this.$message.warning("当前限制选择 1 个文件，请删除后继续上传")},uploadFile:function(e){var t=this,a=e.file,i=new FormData;i.append("file",a),i.append("comId",this.comId),h(i).then(function(e){var a=JSON.parse(e.data.Content);console.log(a),a.Success?(t.dialogFormVisible=!1,t.getList(),t.$message({title:"成功",message:"导入成功",type:"success",duration:2e3})):t.$message({title:"失败",message:"导入失败:"+a.Message,type:"error",duration:4e3})})},handleDownUpload:function(){var e=window.PLATFROM_CONFIG.baseUrl+"/api/Receive/DoDownLoadTemp";window.open(e)},getNowFormatDate:function(){var e=new Date,t="-",a=e.getFullYear(),i=e.getMonth()+1,n=e.getDate();i>=1&&i<=9&&(i="0"+i),n>=0&&n<=9&&(n="0"+n);var o=a+t+i+t+n;return o},handleCheckLabel:function(){var e=this;""!==this.Label.Code&&null!=this.Label.Code?Object(y["c"])(this.Label.Code).then(function(t){if("undefined"!==typeof t.data.Content){var a=JSON.parse(t.data.Content);""===a||null===a?e.restLabel():e.Label=a}else e.$message({title:"失败",message:"未获取到该条码明细，请核查输入条码信息",type:"error",duration:2e3})}):this.$message({title:"失败 ",message:"请先扫描或输入条码",type:"error",duration:2e3})},dialogInMaterialVisibleOpen:function(){this.dialogInMaterialVisible=!0,this.InMaterial.Quantity=0,this.resstIn(),this.restLabel()},restLabel:function(){this.Label={Code:null,SupplyCode:null,MaterialCode:null,ProductionDate:null,Batchcode:null}},resstReceive:function(){this.Receive={Code:"",Quantity:"",Status:"",PredictReturnTime:"",ReceiveType:"",LastTimeReceiveName:"",LastTimeReceiveDatetime:"",ReceiveTime:"",WareHouseCode:"",Remarks:"",DesignCode:"",AddMaterial:[]},this.addMaterial=[],this.$refs.addMaterialGrid.clearSelection()},timer:function(){var e=this;return setInterval(function(){e.getList()},1e4)}}},C=R,L=a("2877"),T=Object(L["a"])(C,i,n,!1,null,null,null);t["default"]=T.exports},cbe9:function(e,t,a){"use strict";a.d(t,"j",function(){return n}),a.d(t,"h",function(){return o}),a.d(t,"a",function(){return r}),a.d(t,"c",function(){return l}),a.d(t,"b",function(){return s}),a.d(t,"g",function(){return d}),a.d(t,"e",function(){return c}),a.d(t,"i",function(){return u}),a.d(t,"f",function(){return p}),a.d(t,"d",function(){return h});var i=a("b775");function n(e){return Object(i["a"])({url:"api/User/GetUserList",method:"get",params:e})}function o(){return Object(i["a"])({url:"api/User/GetUserInfos",method:"get"})}function r(e){return Object(i["a"])({url:"api/User/PostDoCreate",method:"post",data:e})}function l(e){return Object(i["a"])({url:"api/User/PostDoEdit",method:"post",data:e})}function s(e){return Object(i["a"])({url:"api/User/PostDoRemove",method:"post",data:e})}function d(e){return Object(i["a"])({url:"api/User/GetUserInfo",method:"get",params:{code:e}})}function c(e){return Object(i["a"])({url:"api/User/PostDoEditUserCenter",method:"post",data:e})}function u(e){return Object(i["a"])({url:"api/User/GetUserlInfoList",method:"get",params:{KeyValue:e}})}function p(e){return Object(i["a"])({url:"api/User/GetUserInfoByRole",method:"get",params:{role:e}})}function h(e){return Object(i["a"])({url:"api/User/PostDoEditUserArea",method:"post",data:e})}}}]);