(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-145294cb"],{"70bb":function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"User"}},[r("el-form",{ref:"UserForm",staticClass:"page-form",attrs:{model:e.User,rules:e.rules,"status-icon":"","label-width":"100px","label-position":"right"}},[r("el-card",[r("h4",{staticClass:"page-title-h4"},[e._v("个人中心")]),e._v(" "),r("hr",{staticClass:"line-sub"}),e._v(" "),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:10}},[r("el-form-item",{staticClass:"item",attrs:{label:"手机:",prop:"Mobilephone"}},[r("el-input",{staticClass:"dialog-input",attrs:{placeholder:"请输入手机号码",onkeyup:"value=value.replace(/[^\\d]/g,'')",maxlength:"11"},model:{value:e.User.Mobilephone,callback:function(t){e.$set(e.User,"Mobilephone",t)},expression:"User.Mobilephone"}})],1),e._v(" "),r("el-form-item",{staticClass:"item",attrs:{label:"密码:",prop:"Password"}},[r("div",[r("el-input",{staticClass:"dialog-input",attrs:{type:"password","auto-complete":"off"},on:{change:e.changePassword},model:{value:e.User.Password,callback:function(t){e.$set(e.User,"Password",t)},expression:"User.Password"}})],1)]),e._v(" "),r("el-form-item",{staticClass:"item",attrs:{label:"确认密码:",prop:"checkPass"}},[r("el-input",{staticClass:"dialog-input",attrs:{type:"password","auto-complete":"off"},model:{value:e.User.checkPass,callback:function(t){e.$set(e.User,"checkPass",t)},expression:"User.checkPass"}})],1),e._v(" "),r("el-form-item",{staticClass:"item",attrs:{label:"姓名:",prop:"Name"}},[r("el-input",{staticClass:"dialog-input",attrs:{placeholder:"请输入姓名"},model:{value:e.User.Name,callback:function(t){e.$set(e.User,"Name",t)},expression:"User.Name"}})],1),e._v(" "),r("el-form-item",{staticClass:"item",attrs:{label:"性别:"}},[r("el-radio-group",{on:{change:e.selectedSex},model:{value:e.User.Sex,callback:function(t){e.$set(e.User,"Sex",t)},expression:"User.Sex"}},[r("el-radio",{attrs:{label:"1"}},[e._v("男")]),e._v(" "),r("el-radio",{attrs:{label:"2"}},[e._v("女")])],1)],1)],1),e._v(" "),r("el-col",{attrs:{span:14}},[r("img",{staticClass:"image",attrs:{src:e.faceUrl}}),e._v(" "),r("div",{staticStyle:{margin:"20px 0px"}},[e._v("人脸照片需小于200k")]),e._v(" "),r("el-upload",{staticClass:"filter-button",attrs:{"show-file-list":!1,"on-success":e.uploadingPicture,action:e.uploadFileLibrary,"before-upload":e.PictureStatus,data:{Id:e.User.Id}}},[r("el-button",{staticStyle:{"margin-bottom":"70px"}},[e._v("上传人脸图片")])],1)],1)],1),e._v(" "),r("div",{staticStyle:{padding:"20px 115px"}},[r("el-button",{attrs:{type:"primary"},on:{click:e.updateUser}},[e._v("确定")]),e._v(" "),r("router-link",{attrs:{to:"/"}},[r("el-button",[e._v("取消")])],1)],1)],1)],1)],1)},a=[],i=(r("a481"),r("cbe9")),o=r("8237"),n=r.n(o),l=r("ed08"),c=r("4360"),u=r("c934"),d={data:function(){var e=this,t=function(t,r,s){""===r?s(new Error("请输入密码")):(""!==e.User.checkPass&&e.$refs.UserForm.validateField("checkPass"),s())},r=function(t,r,s){""===r?s(new Error("请再次输入密码")):r!==e.User.Password?s(new Error("两次输入密码不一致!")):s()};return{isCreate:1,imagecropperShow:!1,imagecropperKey:0,image:window.PLATFROM_CONFIG.baseUrl+"/Assets/images/3.png",isChangePassword:!1,User:{Id:void 0,Code:"",Name:"",Password:"123456",checkPass:"123456",Sex:"1",Mobilephone:"",WeXin:"",Remark:"",Header:window.PLATFROM_CONFIG.baseUrl+"/Assets/images/3.png",Enabled:!0},rules:{Name:[{required:!0,message:"请输入员工姓名",trigger:"blur"}],Mobilephone:[{required:!0,message:"请输入正确的手机号码",trigger:"blur",min:6,max:11}],Password:[{validator:t,trigger:"blur"}],checkPass:[{required:!0,validator:r,trigger:"blur"}]},textMap:{1:"新建员工",2:"编辑员工"},src:"/logo.png",faceUrl:"",uploadFileLibrary:window.PLATFROM_CONFIG.baseUrl+"/api/FileLibrary/PostDoFaceLibraryUpload1",BaseUrl:window.PLATFROM_CONFIG.baseUrl,JudgeFileLibraty:!1}},created:function(){this.initData()},methods:{initData:function(){var e=this;Object(i["g"])(c["a"].getters.code).then(function(t){var r=JSON.parse(t.data.Content);if(console.log(r),200===t.status){e.User={Id:r.Id,Code:r.Code,Name:r.Name,Password:r.Password,checkPass:r.Password,Sex:"1",Mobilephone:r.Mobilephone,WeXin:r.WeXin,Remark:r.Remark,Header:r.Header,PictureUrl:r.PictureUrl,Enabled:r.Enabled};var s="data:image/png;base64,"+e.User.Remark;e.faceUrl=s.replace(/[\r\n]/g,""),2===r.Sex&&(e.User.Sex="2"),Object(l["d"])(r.Header)&&(e.User.Header=window.PLATFROM_CONFIG.baseUrl+"/Assets/images/3.png")}else e.$message({title:"失败",message:"获取用户信息失败："+r.Message,type:"error",duration:2e3})})},updateUser:function(){var e=this;this.$refs["UserForm"].validate(function(t){t&&(e.isChangePassword&&(e.User.Password=n()(e.User.Password),e.User.checkPass=n()(e.User.checkPass)),Object(i["e"])(e.User).then(function(t){var r=JSON.parse(t.data.Content);r.Success?(e.$message({title:"成功",message:"个人信息编辑成功",type:"success",duration:2e3}),e.resetUser(),e.$router.push({path:"/"})):e.$message({title:"失败",message:"个人信息编辑失败："+r.Message,type:"error",duration:2e3})}))})},PictureStatus:function(e){this.JudgeFileLibraty=!0},uploadingPicture:function(e){var t=JSON.parse(e.Content);if(t.Success){this.User.PictureUrl=t.Data.FilePath;var r="data:image/png;base64,"+t.Data.Remark;this.faceUrl=r.replace(/[\r\n]/g,""),this.User.Remark=t.Data.Remark,this.User.FileID=t.Data.Id}else this.$message({})},creatCancel:function(){var e=this;this.JudgeFileLibraty&&Object(u["c"])(this.EquipmentType).then(function(t){var r=JSON.parse(t.data.Content);r.Success||e.$message({title:"失败",type:"error",message:"图片未删除！",duration:2e3})}),this.dialogFormVisible=!1},cropSuccess:function(e){this.imagecropperShow=!1,this.imagecropperKey=this.imagecropperKey+1,this.User.Header=e},close:function(){this.imagecropperShow=!1},changePassword:function(){this.isChangePassword=!0},selectedSex:function(e){this.User.Sex=e},resetUser:function(){this.User={Id:void 0,Code:"",Name:"",Password:"123456",checkPass:"123456",Sex:"1",Mobilephone:"",Roles:[],WeXin:"",Remark:"",Header:window.PLATFROM_CONFIG.baseUrl+"/Assets/images/3.png",Enabled:!0}}}},p=d,m=r("2877"),b=Object(m["a"])(p,s,a,!1,null,null,null);t["default"]=b.exports},c934:function(e,t,r){"use strict";r.d(t,"a",function(){return a}),r.d(t,"b",function(){return i}),r.d(t,"c",function(){return o});var s=r("b775");function a(e){return Object(s["a"])({url:"api/FileLibrary/GetFileLibraryListOrPages",method:"get",params:e})}function i(e){return Object(s["a"])({url:"api/FileLibrary/PostDoRemove",method:"post",data:{id:e.Id}})}function o(e){return Object(s["a"])({url:"api/FileLibrary/PostDoRemove",method:"post",data:{id:e.FileID}})}},cbe9:function(e,t,r){"use strict";r.d(t,"j",function(){return a}),r.d(t,"h",function(){return i}),r.d(t,"a",function(){return o}),r.d(t,"c",function(){return n}),r.d(t,"b",function(){return l}),r.d(t,"g",function(){return c}),r.d(t,"e",function(){return u}),r.d(t,"i",function(){return d}),r.d(t,"f",function(){return p}),r.d(t,"d",function(){return m});var s=r("b775");function a(e){return Object(s["a"])({url:"api/User/GetUserList",method:"get",params:e})}function i(){return Object(s["a"])({url:"api/User/GetUserInfos",method:"get"})}function o(e){return Object(s["a"])({url:"api/User/PostDoCreate",method:"post",data:e})}function n(e){return Object(s["a"])({url:"api/User/PostDoEdit",method:"post",data:e})}function l(e){return Object(s["a"])({url:"api/User/PostDoRemove",method:"post",data:e})}function c(e){return Object(s["a"])({url:"api/User/GetUserInfo",method:"get",params:{code:e}})}function u(e){return Object(s["a"])({url:"api/User/PostDoEditUserCenter",method:"post",data:e})}function d(e){return Object(s["a"])({url:"api/User/GetUserlInfoList",method:"get",params:{KeyValue:e}})}function p(e){return Object(s["a"])({url:"api/User/GetUserInfoByRole",method:"get",params:{role:e}})}function m(e){return Object(s["a"])({url:"api/User/PostDoEditUserArea",method:"post",data:e})}}}]);