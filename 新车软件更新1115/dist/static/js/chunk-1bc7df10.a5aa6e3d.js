(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1bc7df10"],{"4c65":function(e,t,a){"use strict";a.d(t,"o",function(){return n}),a.d(t,"k",function(){return o}),a.d(t,"h",function(){return r}),a.d(t,"r",function(){return s}),a.d(t,"j",function(){return l}),a.d(t,"f",function(){return c}),a.d(t,"s",function(){return u}),a.d(t,"q",function(){return d}),a.d(t,"l",function(){return h}),a.d(t,"m",function(){return p}),a.d(t,"p",function(){return f}),a.d(t,"g",function(){return C}),a.d(t,"n",function(){return g}),a.d(t,"i",function(){return m}),a.d(t,"d",function(){return v}),a.d(t,"c",function(){return y}),a.d(t,"a",function(){return k}),a.d(t,"b",function(){return b}),a.d(t,"e",function(){return w});var i=a("b775");function n(e){return Object(i["a"])({url:"api/Check/GetPageRecords",method:"get",params:e})}function o(e){return Object(i["a"])({url:"api/Check/GetCheckDetailPageRecords",method:"get",params:e})}function r(e){return Object(i["a"])({url:"api/Check/PostDoCreate",method:"post",data:e})}function s(e){return Object(i["a"])({url:"api/Check/PostDoCreateCheck",method:"post",data:e})}function l(e){return Object(i["a"])({url:"api/Check/PostDoEdit",method:"post",data:e})}function c(e){return Object(i["a"])({url:"api/Check/PostDoCancel",method:"post",data:e})}function u(e){return Object(i["a"])({url:"api/Check/PostDoSubmit",method:"post",data:e})}function d(e){return Object(i["a"])({url:"api/Check/PostDoHandCheck",method:"post",data:e})}function h(e){return Object(i["a"])({url:"api/Dictionary/GetDictionaryByType",method:"get",params:{type:e}})}function p(e,t){return Object(i["a"])({url:"api/Check/GetLocationList",method:"get",params:{query:e,WareHouseCode:t}})}function f(e){return Object(i["a"])({url:"api/Check/GetWareHouseList",method:"get",params:e})}function C(e){return Object(i["a"])({url:"api/Check/PostDoCheckAgain",method:"post",data:e})}function g(e){return Object(i["a"])({url:"api/Check/GetMaterialList",method:"get",params:{keyValue:e}})}function m(e){return Object(i["a"])({url:"api/Check/PostDoCreateDetail",method:"post",data:e})}function v(e){return Object(i["a"])({url:"api/Check/GetWareHouseAreaList",method:"get",params:{WareHouseCode:e}})}function y(e){return Object(i["a"])({url:"api/Check/GetCheckAreaList",method:"get",params:{CheckCode:e}})}function k(e){return Object(i["a"])({url:"api/Check/CheckTaskDoFinish",method:"post",data:e})}function b(e){return Object(i["a"])({url:"api/Check/CheckTaskDoStart",method:"post",data:e})}function w(e){return Object(i["a"])({url:"api/Check/PostPDACheckComplete",method:"post",data:e})}},"5c83":function(e,t,a){"use strict";a("a481"),a("6762"),a("2fdb");var i={bind:function(e,t,a){var i=e.querySelector(".el-dialog__header"),n=e.querySelector(".el-dialog");i.style.cssText+=";cursor:move;",n.style.cssText+=";top:0px;";var o=function(){return window.document.currentStyle?function(e,t){return e.currentStyle[t]}:function(e,t){return getComputedStyle(e,!1)[t]}}();i.onmousedown=function(e){var t=e.clientX-i.offsetLeft,r=e.clientY-i.offsetTop,s=n.offsetWidth,l=n.offsetHeight,c=document.body.clientWidth,u=document.body.clientHeight,d=n.offsetLeft,h=c-n.offsetLeft-s,p=n.offsetTop,f=u-n.offsetTop-l,C=o(n,"left"),g=o(n,"top");C.includes("%")?(C=+document.body.clientWidth*(+C.replace(/\%/g,"")/100),g=+document.body.clientHeight*(+g.replace(/\%/g,"")/100)):(C=+C.replace(/\px/g,""),g=+g.replace(/\px/g,"")),document.onmousemove=function(e){var i=e.clientX-t,o=e.clientY-r;-i>d?i=-d:i>h&&(i=h),-o>p?o=-p:o>f&&(o=f),n.style.cssText+=";left:".concat(i+C,"px;top:").concat(o+g,"px;"),a.child.$emit("dragDialog")},document.onmouseup=function(e){document.onmousemove=null,document.onmouseup=null}}}},n=function(e){e.directive("el-drag-dialog",i)};window.Vue&&(window["el-drag-dialog"]=i,Vue.use(n)),i.install=n;t["a"]=i},6108:function(e,t,a){"use strict";var i=a("6b06"),n=a.n(i);n.a},6724:function(e,t,a){"use strict";a("8d41");var i="@@wavesContext";function n(e,t){function a(a){var i=Object.assign({},t.value),n=Object.assign({ele:e,type:"hit",color:"rgba(0, 0, 0, 0.15)"},i),o=n.ele;if(o){o.style.position="relative",o.style.overflow="hidden";var r=o.getBoundingClientRect(),s=o.querySelector(".waves-ripple");switch(s?s.className="waves-ripple":(s=document.createElement("span"),s.className="waves-ripple",s.style.height=s.style.width=Math.max(r.width,r.height)+"px",o.appendChild(s)),n.type){case"center":s.style.top=r.height/2-s.offsetHeight/2+"px",s.style.left=r.width/2-s.offsetWidth/2+"px";break;default:s.style.top=(a.pageY-r.top-s.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",s.style.left=(a.pageX-r.left-s.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return s.style.backgroundColor=n.color,s.className="waves-ripple z-active",!1}}return e[i]?e[i].removeHandle=a:e[i]={removeHandle:a},a}var o={bind:function(e,t){e.addEventListener("click",n(e,t),!1)},update:function(e,t){e.removeEventListener("click",e[i].removeHandle,!1),e.addEventListener("click",n(e,t),!1)},unbind:function(e){e.removeEventListener("click",e[i].removeHandle,!1),e[i]=null,delete e[i]}},r=function(e){e.directive("waves",o)};window.Vue&&(window.waves=o,Vue.use(r)),o.install=r;t["a"]=o},"6b06":function(e,t,a){},"8d41":function(e,t,a){},ca33:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-row",[a("el-card",[a("div",{staticClass:"filter-container",staticStyle:{"margin-bottom":"10px"}},[a("el-input",{staticClass:"filter-item",attrs:{placeholder:"盘点单号",clearable:""},on:{clear:e.handleFilter},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleFilter(t)}},model:{value:e.listQuery.Code,callback:function(t){e.$set(e.listQuery,"Code",t)},expression:"listQuery.Code"}}),e._v(" "),a("el-input",{staticClass:"filter-item",attrs:{placeholder:"仓库编码、仓库名称",clearable:""},on:{clear:e.handleFilter},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleFilter(t)}},model:{value:e.listQuery.WarehouseCode,callback:function(t){e.$set(e.listQuery,"WarehouseCode",t)},expression:"listQuery.WarehouseCode"}}),e._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-button",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleFilter}},[e._v("查询")]),e._v(" "),a("el-button",{staticClass:"filter-button",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.handleCreate}},[e._v("添加")])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],key:e.TableKey,staticStyle:{width:"100%","min-height":"100%"},attrs:{data:e.list,"header-cell-style":{background:"#F5F7FA"},border:"",fit:"",size:"mini","highlight-current-row":"",height:e.tableHeight}},[a("el-table-column",{attrs:{type:"index"}}),e._v(" "),a("el-table-column",{attrs:{label:"状态",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.Status?a("el-tag",[a("span",[e._v(e._s(t.row.StatusDescription))])]):e._e(),e._v(" "),1===t.row.Status?a("el-tag",{attrs:{type:"primary"}},[a("span",[e._v(e._s(t.row.StatusDescription))])]):e._e(),e._v(" "),2===t.row.Status?a("el-tag",{attrs:{type:"primary"}},[a("span",[e._v(e._s(t.row.StatusDescription))])]):e._e(),e._v(" "),3===t.row.Status?a("el-tag",{attrs:{type:"success"}},[a("span",[e._v(e._s(t.row.StatusDescription))])]):e._e(),e._v(" "),4===t.row.Status?a("el-tag",{attrs:{type:"warning"}},[a("span",[e._v(e._s(t.row.StatusDescription))])]):e._e(),e._v(" "),5===t.row.Status?a("el-tag",{attrs:{type:"warning"}},[a("span",[e._v(e._s(t.row.StatusDescription))])]):e._e(),e._v(" "),6===t.row.Status?a("el-tag",{attrs:{type:"warning"}},[a("span",[e._v(e._s(t.row.StatusDescription))])]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"仓库编码",width:"90",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.WareHouseCode))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"仓库名称",width:"120",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.WareHouseName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"盘点单号",width:"160",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.Code))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"盘点类型",width:"120",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.CheckDictDescription))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"创建人",width:"120",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.CreatedUserName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"开始时间",width:"160",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.StartTime))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"结束时间",width:"160",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.EndTime))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"备注",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.Remark))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"220","class-name":"small-padding fixed-width",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleCancel(t.row)}}},[e._v("作废")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"info"},on:{click:function(a){return e.handleDetail(t.row)}}},[e._v("详情")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){return e.handleSubmit(t.row)}}},[e._v("下发")])]}}])})],1),e._v(" "),a("div",{staticClass:"pagination-container"},[a("el-pagination",{attrs:{"current-page":e.listQuery.Page,"page-sizes":[10,20,30,50],"page-size":e.listQuery.Rows,total:e.total,background:"",layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)],1),e._v(" "),a("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:e.textMap[e.dialogStatus],visible:e.dialogFormVisible,fullscreen:!0,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"dataForm",staticClass:"dialog-form",attrs:{rules:e.rules,model:e.CheckList,"label-width":"130px","label-position":"left"}},[a("el-form-item",{attrs:{label:"盘点类型"}},[a("el-select",{staticStyle:{width:"300px"},attrs:{placeholder:"请选择盘点类型",multiple:!1,"reserve-keyword":""},model:{value:e.CheckList.CheckDict,callback:function(t){e.$set(e.CheckList,"CheckDict",t)},expression:"CheckList.CheckDict"}},e._l(e.CheckTypeList,function(e){return a("el-option",{key:e.Code,attrs:{label:e.Name,value:e.Code}})}),1)],1),e._v(" "),a("el-form-item",{staticStyle:{width:"300px"},attrs:{label:"选择盘点货柜",prop:"Tray"}},[a("el-cascader-multi",{ref:"CheckAddr",staticStyle:{width:"600px"},attrs:{data:e.options2,"show-all-levels":!1,clearable:""},on:{change:e.Change},model:{value:e.CheckPreserve,callback:function(t){e.CheckPreserve=t},expression:"CheckPreserve"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{staticClass:"dialog-input",attrs:{autosize:{minRows:2,maxRows:4},type:"textarea",placeholder:"备注"},model:{value:e.CheckList.Remark,callback:function(t){e.$set(e.CheckList,"Remark",t)},expression:"CheckList.Remark"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")]),e._v(" "),"create"==e.dialogStatus?a("el-button",{attrs:{type:"primary"},on:{click:e.handleChange}},[e._v("确认")]):e._e()],1)],1),e._v(" "),a("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:"盘点单详情",visible:e.dialogDetial,fullscreen:!0,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogDetial=t}}},[a("div",{staticClass:"filter-container",staticStyle:{"margin-bottom":"20px"}},[a("el-input",{staticClass:"filter-item",staticStyle:{width:"150px"},attrs:{placeholder:"物料编码",clearable:""},on:{clear:e.handleDetailFilter},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleDetailFilter(t)}},model:{value:e.listDetailQuery.MaterialCode,callback:function(t){e.$set(e.listDetailQuery,"MaterialCode",t)},expression:"listDetailQuery.MaterialCode"}}),e._v(" "),a("el-input",{staticClass:"filter-item",staticStyle:{width:"150px"},attrs:{placeholder:"物料条码",clearable:""},on:{clear:e.handleDetailFilter},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleDetailFilter(t)}},model:{value:e.listDetailQuery.MaterialLabel,callback:function(t){e.$set(e.listDetailQuery,"MaterialLabel",t)},expression:"listDetailQuery.MaterialLabel"}}),e._v(" "),a("el-select",{attrs:{multiple:!1,"reserve-keyword":"",clearable:!0,placeholder:"请选择货柜"},on:{change:e.handleDetailFilter},model:{value:e.listDetailQuery.ContainerCode,callback:function(t){e.$set(e.listDetailQuery,"ContainerCode",t)},expression:"listDetailQuery.ContainerCode"}},e._l(e.areaList,function(e){return a("el-option",{key:e.Code,attrs:{label:e.Name,value:e.Code}})}),1),e._v(" "),a("el-select",{attrs:{multiple:!1,filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入库位编码","remote-method":e.remoteMethod,loading:e.locationLoading,clearable:""},on:{clear:e.handleDetailFilter,change:e.locationSelectChange},model:{value:e.listDetailQuery.LocationCode,callback:function(t){e.$set(e.listDetailQuery,"LocationCode",t)},expression:"listDetailQuery.LocationCode"}},e._l(e.locationList,function(e){return a("el-option",{key:e.Code,attrs:{label:e.Code,value:e.Code}})}),1),e._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-button",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleDetailFilter}},[e._v("查询")])],1),e._v(" "),a("el-row",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:!1,expression:"false"}],key:e.TableKey,staticStyle:{width:"100%","min-height":"100%"},attrs:{data:e.detailList,height:"450px","header-cell-style":{background:"#F5F7FA"},border:"",fit:"",size:"mini","highlight-current-row":""}},[a("el-table-column",{attrs:{type:"index",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{label:"状态",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.Status?a("el-tag",[a("span",[e._v(e._s(t.row.StatusDetailDescription))])]):e._e(),e._v(" "),1===t.row.Status?a("el-tag",{attrs:{type:"success"}},[a("span",[e._v(e._s(t.row.StatusDetailDescription))])]):e._e(),e._v(" "),2===t.row.Status?a("el-tag",{attrs:{type:"primary"}},[a("span",[e._v(e._s(t.row.StatusDetailDescription))])]):e._e(),e._v(" "),3===t.row.Status?a("el-tag",{attrs:{type:"success"}},[a("span",[e._v(e._s(t.row.StatusDetailDescription))])]):e._e(),e._v(" "),4===t.row.Status?a("el-tag",{attrs:{type:"warning"}},[a("span",[e._v(e._s(t.row.StatusDetailDescription))])]):e._e(),e._v(" "),5===t.row.Status?a("el-tag",{attrs:{type:"warning"}},[a("span",[e._v(e._s(t.row.StatusDetailDescription))])]):e._e(),e._v(" "),6===t.row.Status?a("el-tag",{attrs:{type:"warning"}},[a("span",[e._v(e._s(t.row.StatusDetailDescription))])]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"货柜码",width:"140",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.ContainerCode))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"储位码",width:"140",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.LocationCode))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"物料条码",width:"180",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.MaterialLabel))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"物料编码",width:"150",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.MaterialCode))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"物料名称",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.MaterialName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"重量(g)",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.Quantity))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"盘点重量(g)",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[i.edit?[a("el-input",{staticClass:"edit-input",staticStyle:{width:"80px"},attrs:{size:"mini"},model:{value:i.CheckedQuantity,callback:function(t){e.$set(i,"CheckedQuantity",t)},expression:"row.CheckedQuantity"}}),e._v(" "),a("el-button",{staticClass:"cancel-btn",attrs:{size:"mini",type:"warning"},on:{click:function(t){return e.cancelDetailEdit(i)}}},[e._v("取消")])]:a("span",[e._v(e._s(i.CheckedQuantity))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"盘点人",width:"120",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.Checker))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"盘点时间",width:"180",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.CheckedTime))])]}}])})],1),e._v(" "),a("div",{staticClass:"pagination-container"},[a("el-pagination",{attrs:{"current-page":e.listDetailQuery.Page,"page-sizes":[10,20,30,50],"page-size":e.listDetailQuery.Rows,total:e.detailTotal,background:"",layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleDetailSizeChange,"current-change":e.handleDetailCurrentChange}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.closeHandCheck}},[e._v("关闭")])],1)],1)],1)},n=[],o=(a("ac6a"),a("b775"));function r(e){return Object(o["a"])({url:"api/CheckList/GetPageRecords",method:"get",params:e})}function s(e){return Object(o["a"])({url:"api/CheckList/PostDoCancellatione",method:"post",data:e})}function l(e){return Object(o["a"])({url:"api/CheckList/GetCheckListDetailPageRecords",method:"get",params:e})}function c(e){return Object(o["a"])({url:"api/CheckList/GetCheckListContainerList",method:"get",params:{WareHosueCode:e}})}function u(e){return Object(o["a"])({url:"api/Check/PostDoHandCheck",method:"post",data:e})}function d(e){return Object(o["a"])({url:"api/CheckList/PostDoCreate",method:"post",data:e})}function h(e){return Object(o["a"])({url:"api/Dictionary/GetDictionaryByType",method:"get",params:{type:e}})}function p(e,t){return Object(o["a"])({url:"api/CheckList/GetLocationList",method:"get",params:{query:e,WareHouseCode:t}})}function f(e){return Object(o["a"])({url:"api/CheckList/GetWareHouseList",method:"get",params:e})}function C(e){return Object(o["a"])({url:"api/CheckList/GetContainerList",method:"get",params:e})}var g=a("4c65"),m=a("cbe9"),v=a("6724"),y=a("5c83"),k=a("61f7"),b={name:"CheckList",directives:{elDragDialog:y["a"],waves:v["a"]},data:function(){var e=function(e,t,a){Object(k["c"])(t)?a():a(new Error("请输入正确格式的数字（包含两位小数的数字或者不包含小数的数字）"))};return{tableHeight:window.innerHeight-350,CheckPreserve:[],Containers:[],Trays:[],Locations:[],options2:[],valueList:[],props:{value:"value",label:"label",children:"children",multiple:!0,emitPath:!1},addContainers:[],addCheckListDetail:[],UserInfoList:[],total:null,detailTotal:null,listLoading:!1,listDetailLoading:!1,listQuery:{Page:1,Rows:10,Code:"",Status:void 0,Sort:"id",Name:""},listDetailQuery:{Page:1,Rows:10,MaterialCode:"",Sort:"id",MaterialLabel:"",LocationCode:"",CheckCode:"",WareHouseCode:"",ContainerCode:""},downloadLoading:!1,TableKey:0,list:null,detailList:null,dialogFormVisible:!1,dialogFormArea:!1,dialogStatus:"",textMap:{update:"编辑盘点单",create:"创建盘点单"},checkAreaList:[],CheckDetail:{Id:void 0,CheckCode:"",IsDeleted:!1,Quantity:0,CheckedQuantity:0,MaterialCode:"",WareHouseCode:"",AreaCode:"",LocationCode:"",MaterialLabel:"",BatchCode:"",Checker:"",CheckedTime:void 0,Status:4,ManufactureDate:""},CheckList:{Id:void 0,Code:"",CheckDict:"",WareHouseCode:"",IsDeleted:!1,StartTime:0,EndTime:"",Status:"",Remark:"",CreatedTime:void 0,CreatedUserCode:"",CreatedUserName:"",ContainerCode:"",AddCheckListDetails:[],AreaCodes:void 0},CheckListDetail:{Id:void 0,CheckCode:"",IsDeleted:!1,Quantity:0,CheckedQuantity:0,MaterialCode:"",WareHouseCode:"",AreaCode:"",LocationCode:"",MaterialLabel:"",ContainerCode:"",BatchCode:"",Checker:"",CheckedTime:void 0,Status:4,ManufactureDate:"",TrayId:""},rules:{},detailRules:{MaterialLabel:[{required:!0,message:"请输入盘点条码",trigger:"blur"}],LocaitonCode:[{required:!0,message:"请输入盘点单号",trigger:"blur"}],MaterialCode:[{required:!0,message:"请输入盘点单号",trigger:"blur"}],Quantity:[{required:!0,validator:e,trigger:"blur"}],CheckedQuantity:[{required:!0,validator:e,trigger:"blur"}]},dictionaryList:[],showEntity:{wareHouse:"",Container:"",Tray:""},showList:[],zhongjian:[],WareHouseList:[],ContainerList:[],dialogDetial:!1,locationList:null,locationLoading:!1,dialogFormDetail:!1,materialList:[],materialLoading:!1,areaList:[],CheckedAreaList:[],CheckTypeList:[{Code:0,Name:"月度盘点"},{Code:1,Name:"年度盘点"},{Code:2,Name:"周期盘点"}]}},watch:{dialogFormVisible:function(e){e||(this.resstCheckListDetail(),this.resstCheckList(),this.showList=[],this.CheckPreserve=[])}},created:function(){this.getList(),this.getCheckDictTypeList(),this.GetWareHouseList(),this.GetUserInfoList(),this.GetContacitList()},methods:{Change:function(e){console.log(this.CheckPreserve),this.showList=[];for(var t=0;t<this.CheckPreserve.length;t++){var a=this.CheckPreserve[t];a.length<=2||(this.showEntity.wareHouse=a[0],this.showEntity.Container=a[1],this.showEntity.Tray=a[2],this.showList.push(this.showEntity),this.showEntity={})}console.log(this.showList)},handleChange:function(e){var t=this;this.CheckPreserve.length<=0?this.$message({title:"提示",message:"请选择盘点区域",type:"warning",duration:2e3}):""!==this.CheckList.CheckDict?(this.CheckList.AddCheckListDetails=[],this.showList.forEach(function(e){t.CheckListDetail={TrayId:e.Tray},t.CheckList.AddCheckListDetails.push(t.CheckListDetail)}),this.$refs["dataForm"].validate(function(e){e&&d(t.CheckList).then(function(e){var a=JSON.parse(e.data.Content);a.Success?(t.dialogFormVisible=!1,t.getList(),t.$message({title:"成功",message:"创建成功",type:"success",duration:2e3})):t.$message({title:"失败",message:"创建失败："+a.Message,type:"error",duration:2e3})})})):this.$message({title:"提示",message:"请选择盘点类型",type:"warning",duration:2e3})},GetUserInfoList:function(){var e=this;Object(m["h"])().then(function(t){var a=JSON.parse(t.data.Content);a.forEach(function(t){"admin"!==t.Code&&e.UserInfoList.push(t)})})},GetWareHouseList:function(){var e=this;f().then(function(t){var a=JSON.parse(t.data.Content);e.WareHouseList=a})},GetContacitList:function(){var e=this;C().then(function(t){var a=JSON.parse(t.data);e.ContainerList=a,e.ContainerList.forEach(function(t){var a={};a.value=t.Code,a.label="仓库："+t.Name,t.children.forEach(function(t){var i={};i.value=t.Code,i.label="货柜："+t.Code,t.children.forEach(function(t){var a={};a.value=t.Id,a.label="托盘："+t.Code,e.Trays.push(a)}),i.children=e.Trays,e.Trays=[],e.Containers.push(i),a.children=e.Containers}),e.options2.push(a),e.Containers=[]})})},getCheckDictTypeList:function(){var e=this;h("CheckType").then(function(t){var a=JSON.parse(t.data.Content);e.dictionaryList=a})},getList:function(){var e=this;this.listLoading=!0,r(this.listQuery).then(function(t){var a=JSON.parse(t.data.Content);e.list=a.rows,e.total=a.total,setTimeout(function(){e.listLoading=!1},1e3)})},getDetailList:function(){var e=this;this.listDetailLoading=!0,l(this.listDetailQuery).then(function(t){var a=JSON.parse(t.data.Content);e.detailTotal=a.total,e.detailList=a.rows,console.log(e.detailTotal),setTimeout(function(){e.listLoading=!1},1e3)})},handleFilter:function(){this.listQuery.Page=1,this.getList()},handleSizeChange:function(e){this.listQuery.Rows=e,this.getList()},handleCurrentChange:function(e){this.listQuery.Page=e,this.getList()},handleDetailFilter:function(){this.listDetailQuery.Page=1,this.getDetailList()},handleDetailSizeChange:function(e){this.listDetailQuery.Rows=e,this.getDetailList()},handleDetailCurrentChange:function(e){this.listDetailQuery.Page=e,this.getDetailList()},handleCreate:function(){var e=this;this.dialogStatus="create",this.dialogFormVisible=!0,this.CheckPreserve=[],this.$nextTick(function(){e.$refs["dataForm"].clearValidate()})},handleCancel:function(e){var t=this;6!==e.Status?5!==e.Status?(this.$confirm("此操作将永久作废该盘点单, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.CheckList=Object.assign({},e),t.canCelData(t.CheckList)}).catch(function(){t.$message({type:"info",message:"已取消作废"})}),this.$nextTick(function(){t.$refs["dataForm"].clearValidate()})):this.$message({title:"提示",message:"该盘点单"+e.Code+"，已提交。",type:"warning",duration:2e3}):this.$message({title:"提示",message:"该盘点单"+e.Code+"，已作废。",type:"warning",duration:2e3})},canCelData:function(e){var t=this;s(e).then(function(e){var a=JSON.parse(e.data.Content);a.Success?(t.dialogFormVisible=!1,t.$message({title:"成功",message:"作废成功",type:"success",duration:2e3}),t.getList()):t.$message({title:"成功",message:"作废失败"+a.Message,type:"error",duration:2e3})})},cancelDetailEdit:function(e){e.CheckedQuantity=e.OriginalCheckedQuantity,e.edit=!1},confirmDetailEdit:function(e){var t=this;e.edit=!1;var a=parseFloat(e.CheckedQuantity);if(isNaN(a)||"Nan"===a)return this.$message({message:"盘点重量(g)必须为数值",type:"error"}),e.CheckedQuantity=e.OriginalCheckedQuantity,void(e.edit=!0);u(e).then(function(a){var i=JSON.parse(a.data.Content);i.Success?(t.getDetailList(),t.$message({title:"成功",message:"盘点成功",type:"success",duration:2e3})):(e.CheckdQuantity=e.OriginalPickedQuantity,e.edit=!0,t.$message({title:"失败",message:"盘点失败:"+i.Message,type:"error",duration:2e3}))})},HandDetailEdit:function(e){0!==e.Status&&5!==e.Status||(e.edit=!e.edit)},closeHandCheck:function(){this.dialogDetial=!1,this.getList()},handleDetail:function(e){var t=this;this.dialogDetial=!0,this.listDetailQuery.CheckCode=e.Code,this.listDetailQuery.WareHouseCode=e.WareHouseCode,this.getDetailList(),c(e.WareHouseCode).then(function(e){var a=JSON.parse(e.data.Content);t.areaList=a}),this.getDetailList()},handleSubmit:function(e){var t=this;0===e.Status?Object(g["r"])(e).then(function(e){var a=JSON.parse(e.data.Content);a.Success?(t.getList(),t.$message({title:"成功",message:"下发盘点单任务成功",type:"success",duration:2e3})):t.$message({title:"失败",message:"下发盘点单任务失败:"+a.Message,type:"error",duration:2e3})}):this.$message({title:"提示",message:"该盘点单"+e.Code+"，不是初始状态。",type:"warning",duration:2e3})},remoteMethod:function(e){var t=this;""!==e?(this.locationLoading=!0,p(e,this.listDetailQuery.WareHouseCode).then(function(e){var a=JSON.parse(e.data.Content);t.locationList=a}),setTimeout(function(){t.locationLoading=!1},200)):this.locationList=[]},locationSelectChange:function(e){this.listDetailQuery.LocationCode=e,this.getDetailList()},resstCheckListDetail:function(){this.CheckListDetail={Id:void 0,CheckCode:"",IsDeleted:!1,Quantity:0,CheckedQuantity:0,MaterialCode:"",WareHouseCode:"",AreaCode:"",LocationCode:"",MaterialLabel:"",BatchCode:"",Checker:"",CheckedTime:void 0,Status:4,ManufactureDate:""}},resstCheckList:function(){this.CheckList={Id:void 0,Code:"",CheckDict:"",WareHouseCode:"",IsDeleted:!1,StartTime:0,EndTime:"",Status:"",Remark:"",CreatedTime:void 0,CreatedUserCode:"",CreatedUserName:"",ContainerCode:"",AddCheckListDetails:[],AreaCodes:void 0},this.$refs.CheckAddr.$refs.panel.clearCheckedNodes(),this.CheckPreserve=[]}}},w=b,_=(a("6108"),a("2877")),L=Object(_["a"])(w,i,n,!1,null,"6671a285",null);t["default"]=L.exports},cbe9:function(e,t,a){"use strict";a.d(t,"j",function(){return n}),a.d(t,"h",function(){return o}),a.d(t,"a",function(){return r}),a.d(t,"c",function(){return s}),a.d(t,"b",function(){return l}),a.d(t,"g",function(){return c}),a.d(t,"e",function(){return u}),a.d(t,"i",function(){return d}),a.d(t,"f",function(){return h}),a.d(t,"d",function(){return p});var i=a("b775");function n(e){return Object(i["a"])({url:"api/User/GetUserList",method:"get",params:e})}function o(){return Object(i["a"])({url:"api/User/GetUserInfos",method:"get"})}function r(e){return Object(i["a"])({url:"api/User/PostDoCreate",method:"post",data:e})}function s(e){return Object(i["a"])({url:"api/User/PostDoEdit",method:"post",data:e})}function l(e){return Object(i["a"])({url:"api/User/PostDoRemove",method:"post",data:e})}function c(e){return Object(i["a"])({url:"api/User/GetUserInfo",method:"get",params:{code:e}})}function u(e){return Object(i["a"])({url:"api/User/PostDoEditUserCenter",method:"post",data:e})}function d(e){return Object(i["a"])({url:"api/User/GetUserlInfoList",method:"get",params:{KeyValue:e}})}function h(e){return Object(i["a"])({url:"api/User/GetUserInfoByRole",method:"get",params:{role:e}})}function p(e){return Object(i["a"])({url:"api/User/PostDoEditUserArea",method:"post",data:e})}}}]);