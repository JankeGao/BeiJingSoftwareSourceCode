(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c9f7ca30"],{"322a":function(t,e,a){"use strict";a("4917");var i=null;function n(){return!0}if(n()){var l=document.head||document.getElementsByTagName("head")[0]||document.documentElement,r=document.createElement("script");r.src="http://localhost:18000/CLodopfuncs.js?priority=1",l.insertBefore(r,l.firstChild),r=document.createElement("script"),r.src="http://localhost:18000/CLodopfuncs.js?priority=1",l.insertBefore(r,l.firstChild)}function o(t,e){var a,l="<br><font color='#FF00FF'>打印控件未安装!点击这里<a href='install_lodop32.exe' target='_self'>执行安装</a>,安装后请刷新页面或重新进入。</font>",r="<br><font color='#FF00FF'>打印控件未安装!点击这里<a href='install_lodop64.exe' target='_self'>执行安装</a>,安装后请刷新页面或重新进入。</font>",o="<br><br><font color='#FF00FF'>（注意：如曾安装过Lodop旧版附件npActiveXPLugin,请在【工具】->【附加组件】->【扩展】中先卸它）</font>",s="<br><br><font color='#FF00FF'>(如果此前正常，仅因浏览器升级或重安装而出问题，需重新执行以上安装）</font>",d="<br><font color='#FF00FF'>CLodop云打印服务(localhost本地)未安装启动!点击这里<a href='CLodop_Setup_for_Win32NT.exe' target='_self'>执行安装</a>,安装后请刷新页面。</font>";try{var u=navigator.userAgent.indexOf("MSIE")>=0||navigator.userAgent.indexOf("Trident")>=0;if(n()){try{a=getCLodop()}catch(p){}if(!a&&"complete"!==document.readyState)return void alert("C-Lodop没准备好，请稍后再试！");if(!a)return void(u?document.write(d):document.body.innerHTML=d+document.body.innerHTML);e&&e.parentNode&&e.parentNode.removeChild(e),t&&t.parentNode&&t.parentNode.removeChild(t)}else{var c=u&&navigator.userAgent.indexOf("x64")>=0;if(void 0!=t||void 0!=e?a=u?t:e:null==i?(a=document.createElement("object"),a.setAttribute("width",0),a.setAttribute("height",0),a.setAttribute("style","position:absolute;left:0px;top:-100px;width:0px;height:0px;"),u?a.setAttribute("classid","clsid:2105C259-1E0C-4534-8141-A753534CB4CA"):a.setAttribute("type","application/x-print-lodop"),document.documentElement.appendChild(a),i=a):a=i,null==a||"undefined"==typeof a.VERSION)return navigator.userAgent.indexOf("Chrome")>=0&&(document.body.innerHTML=s+document.body.innerHTML),navigator.userAgent.indexOf("Firefox")>=0&&(document.body.innerHTML=o+document.body.innerHTML),c?document.write(r):u?document.write(l):document.body.innerHTML=l+document.body.innerHTML,a}return a.VERSION<"6.2.2.2"?(n(),a):a}catch(p){alert("getLodop出错:"+p)}}e["a"]=o},3798:function(t,e,a){"use strict";a("28a5");var i=a("322a"),n=function(t,e,a){this.templdatedata=t,this.data=e,this.pagesetting=a,this._databinds=null;try{var n=Object(i["a"])();n.VERSION&&n.CVERSION&&(this.LODOP=getCLodop(),this.load=!0)}catch(l){this.load=!1,this.msg="请安装打印控件,若已安装请运行！"}};n.prototype={get databinds(){if(null==this._databinds)if(this.templdatedata){this._databinds={};for(var t=0;t<this.templdatedata.length;t++){var e=this.templdatedata[t],a=e.data.databind.id;if("atable"==e.type){this._databinds[a]||(this._databinds[a]=[]);for(var i=0;i<e.data.thead.rows.length;i++)for(var n=e.data.thead.rows[i],l=0;l<n.cells.length;l++){var r=n.cells[l];if(r["databind"]&&r["databind"]["id"]){var o=r["databind"]["id"];this._databinds[a].indexOf(o)<0&&this._databinds[a].push(o)}}for(i=0;i<e.data.tbody.rows.length;i++)for(n=e.data.tbody.rows[i],l=0;l<n.cells.length;l++){r=n.cells[l];if(r["databind"]&&r["databind"]["id"]){o=r["databind"]["id"];this._databinds[a].indexOf(o)<0&&this._databinds[a].push(o)}}}else if("atext"==e.type)this._databinds[a]="";else if("achart"==e.type){this._databinds[a]||(this._databinds[a]=[]);for(i=0;i<e.data.xdata.length;i++){var s=e.data.xdata[i];o=s.id;s.show&&this._databinds[a].indexOf(o)<0&&this._databinds[a].push(o)}}else"aimage"==e.type&&(this._databinds[a]="")}}else this._databinds={};return this._databinds}},n.prototype.g_text=function(t){for(var e,a=this.LODOP,i=t.data,n=i.value,l=t.data.databind.id.split("."),r=0;r<l.length;r++)this.data[l[r]]&&(e=this.data[l[r]]);for(var o in e&&""!=e&&(n=e),a.ADD_PRINT_TEXT(i.y+"px",i.x+"px",i.width+"px",i.height+"px",n),a.SET_PRINT_STYLEA(0,"ItemType",i.itemtype),i.style)switch(o){case"color":a.SET_PRINT_STYLEA(0,"FontColor",i.style[o]);break;case"fontFamily":a.SET_PRINT_STYLEA(0,"FontName",i.style[o]);break;case"fontSize":a.SET_PRINT_STYLEA(0,"FontSize",.75*parseInt(i.style[o]));break;case"fontSpacing":a.SET_PRINT_STYLEA(0,"letterSpacing",parseInt(i.style[o]));break;case"fontWeight":a.SET_PRINT_STYLEA(0,"Bold","normal"==i.style[o]?0:1);break;case"fontStyle":a.SET_PRINT_STYLEA(0,"Italic","normal"==i.style[o]?0:1);break;case"textAlign":var s=i.style[o],d=1;"left"==s?d=1:"center"==s?d=2:"right"==s&&(d=3),a.SET_PRINT_STYLEA(0,"Alignment",d);break;case"borderType":a.SET_PRINT_STYLEA(0,"TextFrame",i.style[o]);break;case"VOrient":a.SET_PRINT_STYLEA(0,"VOrient",i.style[o]);break;case"HOrient":a.SET_PRINT_STYLEA(0,"HOrient",i.style[o]);break;default:}},n.prototype.g_table=function(t){for(var e,a=this.LODOP,i=t.data,n=i.databind.id.split("."),l=0;l<n.length;l++)this.data[n[l]]&&(e=this.data[n[l]]);var r=document.createElement("table");i.style.borderType>0&&(r.border=1),2==i.style.borderType&&(r.style.borderCollapse="collapse");for(l=0;l<i.thead.rows.length;l++){var o=i.thead.rows[l];if(!o["unprint"])for(var s=r.insertRow(),d=0;d<o.cells.length;d++){var u=o.cells[d],c=s.insertCell();for(var p in c.innerHTML=u.value,c.style.width=u.width+"px",c.style.height=u.height+"px",u.style)c.style[p]=u.style[p]}}if(r&&e.length)for(l=0;l<e.length;l++){var h=e[l];for(d=0;d<i.tbody.rows.length;d++){o=i.tbody.rows[d];if(!o["unprint"]){s=r.insertRow();for(var f=0;f<o.cells.length;f++){u=o.cells[f],c=s.insertCell();for(var p in c.innerHTML=u.value,c.style.width=u.width+"px",c.style.height=u.height+"px",u.style)c.style[p]=u.style[p];u.databind&&u.databind.id&&""!=u.databind.id&&(c.innerHTML=h[u.databind.id])}}}}var g=r.outerHTML;a.ADD_PRINT_TABLE(i.y+"px",i.x+"px",i.width+"px",i.height+"px",g),a.SET_PRINT_STYLEA(0,"ItemType",4)},n.prototype.g_chart=function(t){for(var e,a=this.LODOP,i=[],n=t.data.databind.id.split("."),l=0;l<n.length;l++)this.data[n[l]]&&(e=this.data[n[l]]);for(l=0;l<t.data.xdata.length;l++){var r=t.data.xdata[l];r.group?i.splice(0,0,r):i.push(r)}var o=document.createElement("table"),s=o.insertRow();for(l=0;l<i.length;l++){r=i[l];var d=s.insertCell();d.innerHTML=r.text}for(l=0;l<e.length;l++)for(var u=e[l],c=o.insertRow(),p=0;p<i.length;p++){r=i[p],d=c.insertCell();d.innerHTML=u[r.id]}var h=o.outerHTML;a.ADD_PRINT_CHART(t.data.y+"px",t.data.x+"px",t.data.width+"px",t.data.height+"px",t.data.charttype,h),a.SET_PRINT_STYLEA(0,"ChartStyle",t.data.printstyle.join("")),a.SET_PRINT_STYLEA(0,"ChartTitle",t.data.charttitle),a.SET_PRINT_STYLEA(0,"ChartFoot",t.data.chartfoot)},n.prototype.g_image=function(t){for(var e,a,i,n=this.LODOP,l=t.data.databind.id.split("."),r=0;r<l.length;r++)this.data[l[r]]&&(e=this.data[l[r]]);t.data.databind.id&&""!=t.data.databind.id?(i=t.data.databindtype,a=e):(i=t.data.style.defaultimgtype,a=t.data.style.defaultimg),1==i&&(a="URL:"+a),n.ADD_PRINT_IMAGE(t.data.y,t.data.x,t.data.width,t.data.height,a),n.SET_PRINT_STYLEA(0,"ItemType",t.data.itemtype),n.SET_PRINT_STYLEA(0,"Stretch",t.data.style.backgroundSize)},n.prototype.print=function(){if(this.load){this.LODOP.PRINT_INIT("sunagy报表设计"),this.pagesetting&&this.LODOP.SET_PRINT_PAGESIZE(this.pagesetting.intOrient,this.pagesetting.width,this.pagesetting.height,this.pagesetting.pagetype);for(var t=0;t<this.templdatedata.length;t++){var e=this.templdatedata[t];e.data;"atext"==e.type?this.g_text.call(this,e):"atable"==e.type?this.g_table.call(this,e):"achart"==e.type?this.g_chart.call(this,e):"aimage"==e.type&&this.g_image.call(this,e)}LODOP.PRINT()}else alert(this.msg)},n.prototype.definedPrint=function(t){if(this.load){this.LODOP.PRINT_INIT("sunagy报表设计"),this.pagesetting&&this.LODOP.SET_PRINT_PAGESIZE(this.pagesetting.intOrient,this.pagesetting.width,this.pagesetting.height,this.pagesetting.pagetype);for(var e=0;e<this.templdatedata.length;e++){var a=this.templdatedata[e];a.data;"atext"==a.type?this.g_text.call(this,a):"atable"==a.type?this.g_table.call(this,a):"achart"==a.type?this.g_chart.call(this,a):"aimage"==a.type&&this.g_image.call(this,a)}console.log(t),LODOP.SET_PRINTER_INDEX(t),LODOP.PRINT()}else alert(this.msg)},e["a"]=n},"5c83":function(t,e,a){"use strict";a("a481"),a("6762"),a("2fdb");var i={bind:function(t,e,a){var i=t.querySelector(".el-dialog__header"),n=t.querySelector(".el-dialog");i.style.cssText+=";cursor:move;",n.style.cssText+=";top:0px;";var l=function(){return window.document.currentStyle?function(t,e){return t.currentStyle[e]}:function(t,e){return getComputedStyle(t,!1)[e]}}();i.onmousedown=function(t){var e=t.clientX-i.offsetLeft,r=t.clientY-i.offsetTop,o=n.offsetWidth,s=n.offsetHeight,d=document.body.clientWidth,u=document.body.clientHeight,c=n.offsetLeft,p=d-n.offsetLeft-o,h=n.offsetTop,f=u-n.offsetTop-s,g=l(n,"left"),m=l(n,"top");g.includes("%")?(g=+document.body.clientWidth*(+g.replace(/\%/g,"")/100),m=+document.body.clientHeight*(+m.replace(/\%/g,"")/100)):(g=+g.replace(/\px/g,""),m=+m.replace(/\px/g,"")),document.onmousemove=function(t){var i=t.clientX-e,l=t.clientY-r;-i>c?i=-c:i>p&&(i=p),-l>h?l=-h:l>f&&(l=f),n.style.cssText+=";left:".concat(i+g,"px;top:").concat(l+m,"px;"),a.child.$emit("dragDialog")},document.onmouseup=function(t){document.onmousemove=null,document.onmouseup=null}}}},n=function(t){t.directive("el-drag-dialog",i)};window.Vue&&(window["el-drag-dialog"]=i,Vue.use(n)),i.install=n;e["a"]=i},6193:function(t,e,a){"use strict";a.d(e,"d",function(){return n}),a.d(e,"f",function(){return l}),a.d(e,"a",function(){return r}),a.d(e,"c",function(){return o}),a.d(e,"b",function(){return s}),a.d(e,"e",function(){return d}),a.d(e,"g",function(){return u});var i=a("b775");function n(t){return Object(i["a"])({url:"api/Supply/GetPageRecords",method:"get",params:t})}function l(t){return Object(i["a"])({url:"api/Supply/GetPageRecords",method:"get",params:t})}function r(t){return Object(i["a"])({url:"api/Supply/PostDoCreate",method:"post",data:t})}function o(t){return Object(i["a"])({url:"api/Supply/PostDoEdit",method:"post",data:t})}function s(t){return Object(i["a"])({url:"api/Supply/PostDoDelete",method:"post",data:{id:t.Id}})}function d(t){return Object(i["a"])({url:"api/Supply/GetSupplierList",method:"get",params:{KeyValue:t}})}function u(t){return Object(i["a"])({url:"api/Supply/DoUpLoadSupplyInfo",method:"post",data:t})}},"7a30":function(t,e,a){"use strict";a.d(e,"c",function(){return n}),a.d(e,"d",function(){return l}),a.d(e,"a",function(){return r}),a.d(e,"b",function(){return o}),a.d(e,"f",function(){return s}),a.d(e,"e",function(){return d}),a.d(e,"i",function(){return u}),a.d(e,"g",function(){return c}),a.d(e,"h",function(){return p});var i=a("b775");function n(t){return Object(i["a"])({url:"api/InTask/GetPageRecords",method:"get",params:t})}function l(t){return Object(i["a"])({url:"api/InTask/GetInTaskMaterialList",method:"get",params:{inTaskCode:t}})}function r(t){return Object(i["a"])({url:"api/InTask/PostDoCreate",method:"post",data:t})}function o(t){return Object(i["a"])({url:"api/Dictionary/GetDictionaryByType",method:"get",params:{type:t}})}function s(t){return Object(i["a"])({url:"api/InTask/PostDoSendOrder",method:"post",data:t})}function d(t){return Object(i["a"])({url:"api/InTask/GetLocationList",method:"get",params:t})}function u(t){return Object(i["a"])({url:"api/InTask/PostDoHandShelf",method:"post",data:t})}function c(t){return Object(i["a"])({url:"api/InTask/PostDoStartContrainer",method:"post",data:t})}function p(t){return Object(i["a"])({url:"api/InTask/PostRestoreContrainer",method:"post",data:t})}},ac44:function(t,e,a){"use strict";a.d(e,"d",function(){return n}),a.d(e,"b",function(){return l}),a.d(e,"c",function(){return r}),a.d(e,"e",function(){return o}),a.d(e,"a",function(){return s});var i=a("b775");function n(t){return Object(i["a"])({url:"api/Label/GetPageRecords",method:"get",params:t})}function l(t){return Object(i["a"])({url:"api/Label/PostDoCreate",method:"post",data:t})}function r(t){return Object(i["a"])({url:"api/Label/GetLabelByCode",method:"get",params:{code:t}})}function o(t){return Object(i["a"])({url:"api/Label/PostQueryHistoryLabel",method:"post",data:t})}function s(t){return Object(i["a"])({url:"api/Label/PostDoCreateBatchLabel",method:"post",data:t})}},f579:function(t,e,a){var i=a("62c5"),n={render:function(t){return t("div",[t(this.elementTag,{style:{display:this.valid?void 0:"none"},class:["vue-barcode-element"]}),t("div",{style:{display:this.valid?"none":void 0}},this.$slots.default)])},props:{value:[String,Number],format:[String],width:[String,Number],height:[String,Number],text:[String,Number],fontOptions:[String],font:[String],textAlign:[String],textPosition:[String],textMargin:[String,Number],fontSize:[String,Number],background:[String],lineColor:[String],margin:[String,Number],marginTop:[String,Number],marginBottom:[String,Number],marginLeft:[String,Number],marginRight:[String,Number],displayValue:{type:[String,Boolean],default:!0},elementTag:{type:String,default:"svg",validator:function(t){return-1!==["canvas","svg","img"].indexOf(t)}}},mounted:function(){this.$watch("$props",l,{deep:!0,immediate:!0}),l.call(this)},data:function(){return{valid:!0}}};function l(){var t=this,e={format:this.format,height:this.height,width:this.width,text:this.text,fontOptions:this.fontOptions,font:this.font,textAlign:this.textAlign,textPosition:this.textPosition,textMargin:this.textMargin,fontSize:this.fontSize,background:this.background,lineColor:this.lineColor,margin:this.margin,marginTop:this.marginTop,marginBottom:this.marginBottom,marginLeft:this.marginLeft,marginRight:this.marginRight,valid:function(e){t.valid=e},displayValue:this.displayValue,elementTag:this.elementTag};r(e),i(this.$el.querySelector(".vue-barcode-element"),String(this.value),e)}function r(t){for(var e in t)t.hasOwnProperty(e)&&void 0===t[e]&&delete t[e]}t.exports=n},f9c4:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-card",{staticClass:"search-card"},[a("div",{staticClass:"filter-container",staticStyle:{"margin-bottom":"10px"}},[a("el-input",{staticClass:"filter-item",attrs:{placeholder:"入库单号",clearable:""},on:{clear:t.handleFilter},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleFilter(e)}},model:{value:t.listQuery.Code,callback:function(e){t.$set(t.listQuery,"Code",e)},expression:"listQuery.Code"}}),t._v(" "),a("el-select",{attrs:{multiple:!1,filterable:"",remote:"","reserve-keyword":""},on:{change:t.handleFilter},model:{value:t.listQuery.Status,callback:function(e){t.$set(t.listQuery,"Status",e)},expression:"listQuery.Status"}},t._l(t.statusList,function(t){return a("el-option",{key:t.Code,attrs:{label:t.Name,value:t.Code}})}),1),t._v(" "),a("el-button",{staticClass:"filter-button",attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.handleFilter}},[t._v("查询")]),t._v(" "),a("el-button",{staticClass:"filter-button",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-edit"},on:{click:t.handleCreate}},[t._v("添加")]),t._v(" "),a("el-button",{staticClass:"filter-button",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-edit"},on:{click:t.handleInterfaceCreate}},[t._v("同步")]),t._v(" "),a("el-upload",{ref:"fileupload",staticStyle:{display:"inline","margin-left":"10px","margin-right":"10px"},attrs:{action:"#","show-file-list":!1,"http-request":t.uploadFile,"before-upload":t.beforeUpload,"on-exceed":t.handleExceed}},[a("el-button",{attrs:{type:"primary"}},[a("i",{staticClass:"el-icon-upload"}),t._v(" "+t._s(t.$t("baseBtn.importBtn"))+"\n        ")])],1),t._v(" "),a("el-button",{staticClass:"filter-button",attrs:{loading:t.downloadLoading,type:"primary",icon:"el-icon-download"},on:{click:t.handleDownUpload}},[t._v("模板")])],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],key:t.TableKey,staticStyle:{width:"100%","min-height":"100%"},attrs:{data:t.list,"header-cell-style":{background:"#F5F7FA"},size:"mini",height:"331",border:"",fit:"","highlight-current-row":""},on:{"row-click":t.handleRowClick}},[a("el-table-column",{attrs:{type:"index",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{label:"状态",width:"110",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[0===e.row.Status?a("el-tag",{attrs:{size:"mini",type:"warning"}},[a("span",[t._v(t._s(e.row.StatusCaption))])]):t._e(),t._v(" "),1===e.row.Status?a("el-tag",{attrs:{size:"mini",type:"warning"}},[a("span",[t._v(t._s(e.row.StatusCaption))])]):t._e(),t._v(" "),2===e.row.Status?a("el-tag",{attrs:{size:"mini"}},[a("span",[t._v(t._s(e.row.StatusCaption))])]):t._e(),t._v(" "),3===e.row.Status?a("el-tag",{attrs:{size:"mini",type:"success"}},[a("span",[t._v(t._s(e.row.StatusCaption))])]):t._e(),t._v(" "),4===e.row.Status?a("el-tag",{attrs:{size:"mini",type:"info"}},[a("span",[t._v(t._s(e.row.StatusCaption))])]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"入库单号",width:"160",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.Code))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"入库类型",width:"120",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.InDictDescription))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"仓库",width:"150",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.WareHouseCode)+"-"+t._s(e.row.WareHouseName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"来源单据号",width:"150",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.BillCode))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"备注",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.Remark))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"添加信息",width:"120",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(t._s(e.row.CreatedUserName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"添加时间",width:"160",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.CreatedTime))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"260px","class-name":"small-padding fixed-width",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(a){return t.handleDelete(e.row)}}}),t._v(" "),a("el-button",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],attrs:{size:"mini",type:"primary"},on:{click:function(a){return t.handleCreateTask(e.row)}}},[t._v("下发")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return t.handleCancel(e.row)}}},[t._v("作废")])]}}])})],1),t._v(" "),a("div",{staticClass:"pagination-container"},[a("el-pagination",{attrs:{"current-page":t.listQuery.Page,"page-sizes":[6,12,18,24],"page-size":t.listQuery.Rows,total:t.total,background:"",layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1),t._v(" "),a("el-card",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:!1,expression:"false"}],key:t.TableKey,staticStyle:{width:"100%","min-height":"100%"},attrs:{data:t.listMaterial,"header-cell-style":{background:"#F5F7FA"},height:300,size:"mini",border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{type:"index",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{label:"状态",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[0===e.row.Status?a("el-tag",{attrs:{size:"mini",type:"warning"}},[a("span",[t._v(t._s(e.row.StatusCaption))])]):t._e(),t._v(" "),1===e.row.Status?a("el-tag",{attrs:{size:"mini",type:"warning"}},[a("span",[t._v(t._s(e.row.StatusCaption))])]):t._e(),t._v(" "),2===e.row.Status?a("el-tag",{attrs:{size:"mini"}},[a("span",[t._v(t._s(e.row.StatusCaption))])]):t._e(),t._v(" "),3===e.row.Status?a("el-tag",{attrs:{size:"mini",type:"success"}},[a("span",[t._v(t._s(e.row.StatusCaption))])]):t._e(),t._v(" "),4===e.row.Status?a("el-tag",{attrs:{size:"mini",type:"info"}},[a("span",[t._v(t._s(e.row.StatusCaption))])]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"物料编码",width:"200",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.MaterialCode))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"物料描述",width:"100",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.MaterialName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"类别",width:"60",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.MaterialTypeDescription))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"供应商名称",width:"150",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.SupplierName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"供应商编码",width:"150",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.SupplierCode))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"生产日期",width:"150",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.ManufactrueDate))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"到期日期",width:"150",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.ValidityDate))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"批次",width:"150",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.BatchCode))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"重量(g)",width:"100",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.Quantity))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"已下发重量(g)",width:"100",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.SendInQuantity))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"已入库重量(g)",width:"100",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.RealInQuantity))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"150px","class-name":"small-padding fixed-width",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{staticStyle:{width:"80px"},attrs:{size:"mini",type:"info"},on:{click:function(a){return t.handleCreatLabel(e.row)}}},[t._v("打印条码")])]}}])})],1)],1),t._v(" "),a("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:t.textMap[t.dialogStatus],visible:t.dialogFormVisible,fullscreen:!0,"close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{ref:"dataForm",staticClass:"dialog-form",attrs:{rules:t.rules,model:t.In,"label-width":"100px","label-position":"left"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"仓库编码",prop:"WareHouseCode"}},[a("el-select",{staticStyle:{width:"300px"},attrs:{multiple:!1,filterable:""},model:{value:t.In.WareHouseCode,callback:function(e){t.$set(t.In,"WareHouseCode",e)},expression:"In.WareHouseCode"}},t._l(t.WareHouseList,function(t){return a("el-option",{key:t.Code,attrs:{label:t.Name,value:t.Code}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"来源单号",prop:"Name"}},[a("el-input",{staticClass:"dialog-input",attrs:{clearable:"",placeholder:"请输入来源单据号"},model:{value:t.In.BillCode,callback:function(e){t.$set(t.In,"BillCode",e)},expression:"In.BillCode"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"入库类型",prop:"LocationCode"}},[a("el-select",{staticStyle:{width:"300px"},attrs:{multiple:!1,"reserve-keyword":""},model:{value:t.In.InDict,callback:function(e){t.$set(t.In,"InDict",e)},expression:"In.InDict"}},t._l(t.dictionaryList,function(t){return a("el-option",{key:t.Code,attrs:{label:t.Name,value:t.Code}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"备注信息"}},[a("el-input",{staticClass:"dialog-input",attrs:{autosize:{minRows:1,maxRows:1},type:"textarea",placeholder:"入库备注"},model:{value:t.In.Remark,callback:function(e){t.$set(t.In,"Remark",e)},expression:"In.Remark"}})],1)],1)],1)],1),t._v(" "),a("div",[a("div",{staticStyle:{"margin-bottom":"20px"}},[a("el-button",{staticClass:"filter-button",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-edit"},on:{click:t.handleCreateInMaterial}},[t._v("添加")]),t._v(" "),a("el-button",{staticClass:"filter-button",staticStyle:{"margin-left":"10px"},attrs:{type:"danger",icon:"el-icon-delete"},on:{click:t.handleDeleteInMaterial}},[t._v("移除")])],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:!1,expression:"false"}],key:t.TableKey,ref:"addMaterialGrid",staticStyle:{width:"100%","min-height":"100%"},attrs:{size:"mini",data:t.addMaterial,"header-cell-style":{background:"#F5F7FA"},border:"",fit:"","highlight-current-row":"",height:"350"},on:{"row-click":t.addMaterialGridClick}},[a("el-table-column",{attrs:{type:"index",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{label:"物料名称",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.Status?a("el-select",{staticStyle:{width:"400px"},attrs:{multiple:!1,filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入关键词(物料编码或名称)","remote-method":t.remoteMethod,loading:t.loading},on:{change:function(a){return t.materialCodeChange(e.row)}},model:{value:e.row.MaterialCode,callback:function(a){t.$set(e.row,"MaterialCode",a)},expression:"scope.row.MaterialCode"}},t._l(t.materialList,function(t){return a("el-option",{key:t.Code,attrs:{label:t.Name,value:t.Code}})}),1):a("span",[t._v(t._s(e.row.MaterialName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"物料编码",width:"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.MaterialCode))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"物料类别",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.MaterialTypeDescription))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"供应商名称",width:"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.Status?a("el-select",{attrs:{multiple:!1,filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入供应商名称","remote-method":t.remoteSupplierMethod,loading:t.loading},model:{value:e.row.SupplierCode,callback:function(a){t.$set(e.row,"SupplierCode",a)},expression:"scope.row.SupplierCode"}},t._l(t.supplierList,function(t){return a("el-option",{key:t.Code,attrs:{label:t.Name,value:t.Code}})}),1):a("span",[t._v(t._s(e.row.SupplierName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"供应商编码",width:"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.SupplierCode))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"批次",width:"150",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.Status?a("el-input",{attrs:{clearable:""},model:{value:e.row.BatchCode,callback:function(a){t.$set(e.row,"BatchCode",a)},expression:"scope.row.BatchCode"}}):a("span",[t._v(t._s(e.row.BatchCode))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"重量(g)",width:"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.Status?a("el-input",{model:{value:e.row.Quantity,callback:function(a){t.$set(e.row,"Quantity",a)},expression:"scope.row.Quantity"}}):a("span",[t._v(t._s(e.row.Quantity))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"生产日期",width:"250",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.Status?a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.row.ManufactrueDate,callback:function(a){t.$set(e.row,"ManufactrueDate",a)},expression:"scope.row.ManufactrueDate"}}):a("span",[t._v(t._s(e.row.ManufactrueDate))])]}}])})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取消")]),t._v(" "),"create"==t.dialogStatus?a("el-button",{attrs:{type:"primary"},on:{click:t.createData}},[t._v("确认")]):a("el-button",{attrs:{type:"primary"},on:{click:t.updateData}},[t._v("确认")])],1)],1),t._v(" "),a("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{title:"打印条码",visible:t.dialogBarCodeVisible,fullscreen:!0,"close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogBarCodeVisible=e}}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form",{ref:"dataLabelForm",staticClass:"dialog-form",attrs:{rules:t.labelrules,model:t.InMaterial,"label-width":"120px","label-position":"left"}},[a("el-form-item",{attrs:{label:"物料编码"}},[a("el-input",{staticClass:"dialog-input",attrs:{disabled:""},model:{value:t.InMaterial.MaterialCode,callback:function(e){t.$set(t.InMaterial,"MaterialCode",e)},expression:"InMaterial.MaterialCode"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"物料名称"}},[a("el-input",{staticClass:"dialog-input",attrs:{disabled:""},model:{value:t.InMaterial.MaterialName,callback:function(e){t.$set(t.InMaterial,"MaterialName",e)},expression:"InMaterial.MaterialName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"供应商编码"}},[a("span",[a("el-input",{staticClass:"dialog-input",attrs:{disabled:""},model:{value:t.InMaterial.SupplierCode,callback:function(e){t.$set(t.InMaterial,"SupplierCode",e)},expression:"InMaterial.SupplierCode"}})],1)]),t._v(" "),a("el-form-item",{attrs:{label:"供应商名称"}},[a("el-input",{staticClass:"dialog-input",attrs:{disabled:""},model:{value:t.InMaterial.SupplierName,callback:function(e){t.$set(t.InMaterial,"SupplierName",e)},expression:"InMaterial.SupplierName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"批次"}},[a("el-input",{staticClass:"dialog-input",attrs:{disabled:""},model:{value:t.InMaterial.BatchCode,callback:function(e){t.$set(t.InMaterial,"BatchCode",e)},expression:"InMaterial.BatchCode"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"入库总重量(g)"}},[a("el-input",{staticClass:"dialog-input",attrs:{disabled:""},model:{value:t.InMaterial.Quantity,callback:function(e){t.$set(t.InMaterial,"Quantity",e)},expression:"InMaterial.Quantity"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"到期日期"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",disabled:""},model:{value:t.InMaterial.ValidityDate,callback:function(e){t.$set(t.InMaterial,"ValidityDate",e)},expression:"InMaterial.ValidityDate"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"生产日期"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",disabled:""},model:{value:t.InMaterial.ManufactrueDate,callback:function(e){t.$set(t.InMaterial,"ManufactrueDate",e)},expression:"InMaterial.ManufactrueDate"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"最小单包重量(g)"}},[a("el-input",{staticClass:"dialog-input",attrs:{disabled:""},model:{value:t.InMaterial.PackageQuantity,callback:function(e){t.$set(t.InMaterial,"PackageQuantity",e)},expression:"InMaterial.PackageQuantity"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"条码重量(g)",prop:"PackageQuantity"}},[a("el-input",{staticClass:"dialog-input",attrs:{disabled:1===t.InMaterial.MaterialType},model:{value:t.PackageQuantity,callback:function(e){t.PackageQuantity=e},expression:"PackageQuantity"}}),t._v(" "),1===t.InMaterial.MaterialType?a("div",[t._v("每个模具生成唯一码,重量(g)为1，进行模具生命周期管理")]):t._e()],1),t._v(" "),a("el-form-item",{attrs:{label:"生成个数",prop:"Unit"}},[a("el-input",{staticClass:"dialog-input",model:{value:t.LabelCount,callback:function(e){t.LabelCount=e},expression:"LabelCount"}})],1)],1),t._v(" "),a("div",{staticStyle:{"margin-left":"20px"}},[a("el-button",{on:{click:function(e){t.dialogBarCodeVisible=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],attrs:{type:"primary","element-loading-text":"正在生成条码信息，请稍等~"},on:{click:function(e){return t.handleCreateLabel()}}},[t._v("生成")])],1)],1),t._v(" "),a("el-col",{attrs:{span:16}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("历史条码生成记录")]),t._v(" "),a("span",{staticStyle:{float:"right"}},[a("el-select",{staticStyle:{width:"300px"},attrs:{multiple:!1,filterable:"",placeholder:"选择其他打印机"},model:{value:t.OptionObject.Name,callback:function(e){t.$set(t.OptionObject,"Name",e)},expression:"OptionObject.Name"}},t._l(t.OptionList,function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})}),1)],1)]),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],key:t.TableKey,staticStyle:{width:"100%","min-height":"100%"},attrs:{data:t.labelList,"header-cell-style":{background:"#F5F7FA"},height:"500",border:"",fit:"",size:"mini","highlight-current-row":""}},[a("el-table-column",{attrs:{type:"index",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{label:"条码编码",width:"160",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.Code))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"物料名称","show-overflow-tooltip":"",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.MaterialName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"重量(g)","show-overflow-tooltip":"",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.Quantity))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"供应商名称","show-overflow-tooltip":"",width:"150",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.SupplyName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"批次",width:"120",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.BatchCode))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"生产日期",width:"120",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.ManufactrueDateFormat))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"创建人",width:"120",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.CreatedUserName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"创建时间",width:"180",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.CreatedTime))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"80","class-name":"small-padding fixed-width",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return t.handlePrintCode(e.row)}}},[t._v("打印")])]}}])})],1),t._v(" "),a("div")],1)],1)],1)],1),t._v(" "),a("div",{staticStyle:{visibility:"hidden",height:"250px",position:"absolute",right:"5px",top:"5px"}},[a("el-button",{directives:[{name:"print",rawName:"v-print",value:"#printMe",expression:"'#printMe'"}],attrs:{id:"printBtn",type:"text"}},[t._v("打印")]),t._v(" "),a("span",{staticStyle:{width:"188px"},attrs:{id:"printMe"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:17}},[a("div",{staticStyle:{"font-size":"20px","margin-bottom":"20px"}},[t._v("入库单明细")]),t._v(" "),a("div",{staticStyle:{"font-size":"12px"}},[a("span",[t._v("制单日期："+t._s(t.printDate))]),t._v(" "),a("span",{staticStyle:{"margin-left":"20px"}},[t._v(t._s(t.PrintCode.InDictDescription))]),t._v(" "),a("span",[t._v(t._s(t.PrintCode.BillCode))])])]),t._v(" "),a("el-col",{attrs:{span:7}},[a("barcode",{attrs:{value:t.PrintCode.Code,height:"20",font:"12",width:"1px",margin:"0px"}},[t._v("Show this if the rendering fails.")])],1)],1),t._v(" "),a("hr",{staticStyle:{margin:"10px 0px"}}),t._v(" "),a("div",{staticStyle:{"font-size":"12px"}},[a("div",{staticStyle:{"font-size":"16px",margin:"20px 0px"}},[a("el-row",[a("el-col",{attrs:{span:10}},[a("span",[t._v("名称")])]),t._v(" "),a("el-col",{attrs:{span:2}},[a("span",[t._v("重量(g)")])]),t._v(" "),a("el-col",{attrs:{span:4}},[a("span",[t._v("批次")])]),t._v(" "),a("el-col",{attrs:{span:8}},[a("span",[t._v("物料编码")])])],1)],1),t._v(" "),t._l(t.tempPrintlist,function(e){return a("div",{key:e.Id,staticStyle:{"margin-bottom":"30px"}},[a("el-row",[a("el-col",{staticStyle:{"margin-top":"15px"},attrs:{span:10}},[a("span",[t._v(t._s(e.MaterialName))])]),t._v(" "),a("el-col",{staticStyle:{"margin-top":"15px"},attrs:{span:2}},[a("span",[t._v(t._s(e.Quantity))])]),t._v(" "),a("el-col",{staticStyle:{"margin-top":"15px"},attrs:{span:4}},[a("span",[t._v(t._s(e.BatchCode))])]),t._v(" "),a("el-col",{attrs:{span:8}},[a("barcode",{attrs:{value:e.MaterialCode,height:"20px",width:"2px",font:"8","display-value":"false"}},[t._v("Show this if the rendering fails.")])],1)],1)],1)})],2),t._v(" "),t._m(0)],1)],1)],1)},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{"font-size":"8px"}},[a("div",[t._v("入库单信息")])])}],l=(a("7514"),a("ac6a"),a("b775"));function r(t){return Object(l["a"])({url:"api/In/GetPageRecords",method:"get",params:t})}function o(t){return Object(l["a"])({url:"api/In/GetInMaterialList",method:"get",params:{InCode:t}})}function s(t){return Object(l["a"])({url:"api/In/GetMaterialList",method:"get",params:{KeyValue:t}})}function d(t){return Object(l["a"])({url:"api/In/PostDoCreate",method:"post",data:t})}function u(){return Object(l["a"])({url:"api/In/GetWareHouseList",method:"get"})}function c(t){return Object(l["a"])({url:"api/In/PostDoDelete",method:"post",data:t})}function p(t){return Object(l["a"])({url:"api/In/PostDoUpdate",method:"post",data:t})}function h(t){return Object(l["a"])({url:"api/In/PostDoCancel",method:"post",data:t})}function f(t){return Object(l["a"])({url:"api/In/GetEditMaterialList",method:"get",params:{inCode:t}})}function g(t){return Object(l["a"])({url:"api/Dictionary/GetDictionaryByType",method:"get",params:{type:t}})}function m(t){return Object(l["a"])({url:"api/In/DoUpLoadInInfo",method:"post",data:t})}function b(t){return Object(l["a"])({url:"api/In/PostDoSendOrder",method:"post",data:t})}function v(t){return Object(l["a"])({url:"api/In/GetInterfaceIn",method:"get"})}var y=a("5c83"),_=a("f579"),w=a.n(_),S=a("322a"),C=a("61f7"),I=a("3798"),x=a("ac44"),L=a("6193"),M=a("7a30"),k={name:"InBill",components:{barcode:w.a},directives:{elDragDialog:y["a"]},data:function(){var t=this,e=function(e,a,i){""===t.Label.Code||null===t.Label.Code?i(new Error("请扫描条码")):i()},a=function(e,a,i){Object(C["c"])(t.InMaterial.Quantity)?i():i(new Error("请输入正确的数字"))},i=function(e,a,i){t.PackageQuantity<0?i(new Error("请输入正确的单包条码重量(g)")):i()};return{isDisable:!1,rowData:null,barcodeValue:"test",total:null,listLoading:!1,listQuery:{Page:1,Rows:6,Code:"",Status:void 0,Sort:"id"},OptionList:[],OptionObject:{Name:"",value:0},dictionaryList:[],downloadLoading:!1,dialogPrinterVisible:!1,TableKey:0,list:null,listMaterial:null,addMaterial:[],dialogFormVisible:!1,printerList:[],dialogStatus:"",materialList:[],editMaterialList:[],loading:!1,addMaterialGridCurrentRowIndex:void 0,textMap:{update:"编辑入库单",create:"创建入库单"},In:{Code:"",BillCode:"",WareHouseCode:"",InDict:void 0,Remark:"",AddMaterial:[],Status:void 0},InMaterial:{MaterialCode:"",SendInQuantity:0,MaterialName:"",SupplierCode:"",SupplierName:"",BatchCode:"",Quantity:0,MaterialLabel:"",LocationCode:"",Id:0},PackageQuantity:0,LabelCount:0,PrintCode:"",controls:[],rules:{Code:[{required:!0,message:"请输入入库单号",trigger:"blur"}],WareHouseCode:[{required:!0,message:"请选择仓库",trigger:"blur"}],InputBarcode:[{required:!0,validator:e,trigger:"blur"}],InputNumber:[{require:!0,validator:a,trigger:"blur"}]},labelrules:{PackageQuantity:[{required:!0,message:"请输入单包重量(g)",trigger:"change",validator:i}]},labelList:[],Label:{Code:null,BoxCode:null,MaterialCode:null,ProductionDate:null,Batchcode:null,Quantity:0},fullscreenLoading:!1,WareHouseList:[],tempPrintlist:[],printDate:null,page:{width:520,height:350,pagetype:"",intOrient:1},barCode:"",dialogInMaterialVisible:!1,supplierList:[],editSupplierList:[],statusList:[{Code:void 0,Name:"全部"},{Code:0,Name:"待下发"},{Code:1,Name:"部分下发"},{Code:2,Name:"全部下发"},{Code:3,Name:"已完成"},{Code:4,Name:"已作废"}],dialogBarCodeVisible:!1}},watch:{dialogInMaterialVisible:function(t){t||this.resstIn()},dialogFormVisible:function(t){t||this.resstIn()}},created:function(){this.getList(),this.GetWareHouseList(),this.getInDictTypeList()},destroyed:function(){this.timer&&clearInterval(this.timer)},methods:{handleCreatLabel:function(t){for(var e=Object(S["a"])(),a=e.GET_PRINTER_COUNT(),i=0;i<a;i++)this.OptionList[i]=e.GET_PRINTER_NAME(i);this.InMaterial=Object.assign({},t),1===this.InMaterial.MaterialType?this.PackageQuantity=1:this.PackageQuantity=this.InMaterial.PackageQuantity,this.Label.MaterialCode=this.InMaterial.MaterialCode,this.Label.SupplierCode=this.InMaterial.SupplierCode,this.Label.BatchCode=this.InMaterial.BatchCode,this.Label.ManufactrueDate=this.InMaterial.ManufactrueDate,this.getHistoryLabel(),0!==this.PackageQuantity&&(this.LabelCount=Math.ceil(this.InMaterial.Quantity/this.PackageQuantity)),this.dialogBarCodeVisible=!0},getHistoryLabel:function(){var t=this;Object(x["e"])(this.Label).then(function(e){var a=JSON.parse(e.data.Content);t.labelList=a})},handleCreateLabel:function(){var t=this;Object(C["c"])(this.PackageQuantity)&&0!==this.PackageQuantity?this.LabelCount<=0?this.$message({title:"失败",message:"请输入正确的标签生成重量(g)",type:"error",duration:2e3}):null!==this.InMaterial.Batchcode?this.$refs["dataLabelForm"].validate(function(e){e&&(t.fullscreenLoading=!0,t.InMaterial.PackageQuantity=t.PackageQuantity,t.InMaterial.LabelCount=t.LabelCount,Object(x["a"])(t.InMaterial).then(function(e){var a=JSON.parse(e.data.Content);a.Success?t.getHistoryLabel():t.$message({title:"失败",message:"创建失败："+a.Message,type:"error",duration:2e3})}),setTimeout(function(){t.fullscreenLoading=!1,t.dialogLabelVisible=!0},2e3))}):this.$message({title:"失败",message:"请输入正确的批次",type:"error",duration:2e3}):this.$message({title:"失败",message:"请输入正确格式的重量(g)",type:"error",duration:2e3})},getInDictTypeList:function(){var t=this;g("InType").then(function(e){var a=JSON.parse(e.data.Content);t.dictionaryList=a})},getList:function(){var t=this;this.listLoading=!0,r(this.listQuery).then(function(e){var a=JSON.parse(e.data.Content);t.list=a.rows,t.total=a.total,t.list.length>0&&t.handleRowClick(t.list[0]),setTimeout(function(){t.listLoading=!1},1e3)})},handleFilter:function(){this.listQuery.Page=1,this.getList()},handleSizeChange:function(t){this.listQuery.Rows=t,this.getList()},handleCurrentChange:function(t){this.listQuery.Page=t,this.getList()},handleInterfaceCreate:function(){var t=this;v().then(function(e){var a=JSON.parse(e.data.Content);a.Success?(t.dialogFormVisible=!1,t.getList(),t.handleRowClick(t.In),t.$message({title:"成功",message:a.Message,type:"success",duration:2e3})):t.$message({title:"失败",message:"创建失败："+a.Message,type:"error",duration:2e3})})},handleCreate:function(){var t=this;this.resstIn(),this.dialogStatus="create",this.dialogFormVisible=!0,this.$nextTick(function(){t.$refs["dataForm"].clearValidate()})},createData:function(){var t=this;this.addMaterial.length<=0?this.$message({title:"失败",message:"请添加物料明细",type:"error",duration:2e3}):(this.isDisable=!0,this.$refs["dataForm"].validate(function(e){if(e){if(t.In.AddMaterial=[],t.addMaterial.forEach(function(e){t.In.AddMaterial.push(e)}),!t.checkItem(t.In.AddMaterial[t.In.AddMaterial.length-1]))return;d(t.In).then(function(e){var a=JSON.parse(e.data.Content);a.Success?(t.dialogFormVisible=!1,t.getList(),t.handleRowClick(t.In),t.$message({title:"成功",message:"创建成功",type:"success",duration:2e3})):t.$message({title:"失败",message:"创建失败："+a.Message,type:"error",duration:2e3})}),setTimeout(function(){t.isDisable=!1},2e3)}}))},handleCreateTask:function(t){var e=this;this.fullscreenLoading=!0,Object(M["a"])(t).then(function(a){var i=JSON.parse(a.data.Content);i.Success?(e.getList(),e.handleRowClick(t)):e.$message({title:"失败",message:"创建失败："+i.Message,type:"error",duration:5e3}),e.fullscreenLoading=!1})},handleCancel:function(t){var e=this;this.$confirm("此操作将作废该入库单, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.In=Object.assign({},t),e.cancelData(e.In)}).catch(function(){e.$message({type:"info",message:"已取消作废"})}),this.$nextTick(function(){e.$refs["dataForm"].clearValidate()})},cancelData:function(t){var e=this;h(t).then(function(a){var i=JSON.parse(a.data.Content);i.Success?(e.dialogFormVisible=!1,e.getList(),e.handleRowClick(t),e.$message({title:"成功",message:"入库单作废成功",type:"success",duration:2e3})):e.$message({title:"失败",message:"入库单作废失败："+i.Message,type:"error",duration:2e3})})},handlePrint:function(t){var e=this;this.PrintCode=t,this.printDate=this.getNowFormatDate(),o(t.Code).then(function(t){var a=JSON.parse(t.data.Content);e.tempPrintlist=a;var i=document.getElementById("printBtn");i.click()})},createBarCode:function(t){var e=a("62c5"),i=document.createElement("canvas"),n={format:this.format,height:40,width:1,margin:0,displayValue:!1};e(i,t,n),this.barCode=i.toDataURL("image/jpeg")},handlePrintCode:function(t){var e=this;if(""!==this.OptionObject.Name)if(null!==t){this.$message({title:"成功",message:"打印任务已发送，请稍等",type:"success",duration:2e3});var a={};Object(x["c"])(t.Code).then(function(t){var i=JSON.parse(t.data.Content);console.log("resData"),console.log(i),e.createBarCode(i.Code),e.controls.push({id:111,type:"atext",data:{value:i.MaterialCode,width:400,height:20,x:20,y:10,itemtype:0,databind:{id:"",text:""},style:{color:"#000",fontFamily:"宋体",fontSize:"12px",fontSpacing:0,fontWeight:"normal",fontStyle:"normal",textAlign:"left",border:"",borderType:0,HOrient:0,VOrient:0}}}),e.controls.push({id:111,type:"atext",data:{value:i.MaterialName,width:400,height:20,x:20,y:30,itemtype:0,databind:{id:"",text:""},style:{color:"#000",fontFamily:"宋体",fontSize:"12px",fontSpacing:0,fontWeight:"normal",fontStyle:"normal",textAlign:"left",border:"",borderType:0,HOrient:0,VOrient:0}}}),e.controls.push({id:111,type:"atext",data:{value:"重量(g)：",width:400,height:20,x:20,y:50,itemtype:0,databind:{id:"",text:""},style:{color:"#000",fontFamily:"宋体",fontSize:"12px",fontSpacing:0,fontWeight:"normal",fontStyle:"normal",textAlign:"left",border:"",borderType:0,HOrient:0,VOrient:0}}}),e.controls.push({id:113,type:"atext",data:{value:i.Quantity,width:400,height:20,x:50,y:50,itemtype:0,databind:{id:"",text:""},style:{color:"#000",fontFamily:"宋体",fontSize:"12px",fontSpacing:0,fontWeight:"normal",fontStyle:"normal",textAlign:"left",border:"",borderType:0,HOrient:0,VOrient:0}}}),e.controls.push({id:115,type:"atext",data:{value:"批次：",width:400,height:20,x:85,y:50,itemtype:0,databind:{id:"",text:""},style:{color:"#000",fontFamily:"宋体",fontSize:"12px",fontSpacing:0,fontWeight:"normal",fontStyle:"normal",textAlign:"left",border:"",borderType:0,HOrient:0,VOrient:0}}}),e.controls.push({id:115,type:"atext",data:{value:i.BatchCode,width:400,height:20,x:120,y:50,itemtype:0,databind:{id:"",text:""},style:{color:"#000",fontFamily:"宋体",fontSize:"12px",fontSpacing:0,fontWeight:"normal",fontStyle:"normal",textAlign:"left",border:"",borderType:0,HOrient:0,VOrient:0}}}),e.controls.push({id:1,type:"aimage",data:{x:20,y:75,width:400,height:60,itemtype:0,databindtype:0,databind:{id:"",text:""},style:{backgroundSize:0,defaultimgtype:0,defaultimg:e.barCode,HOrient:0,VOrient:0}}});var n=new I["a"](e.controls,a,e.page);n.print(),e.rowData=null,e.controls=[]})}else this.$message({title:"失败",message:"请选择需要打印条码的入库单",type:"error",duration:2e3});else this.$message({title:"失败",message:"请选择打印机",type:"error",duration:2e3})},handleUpdate:function(t){var e=this;this.In=Object.assign({},t),0===this.In.Status?(o(t.Code).then(function(t){var a=JSON.parse(t.data.Content);e.addMaterial=a}),f(t.Code).then(function(t){var a=JSON.parse(t.data.Content);e.editMaterialList=a,e.materialList=[],e.editMaterialList.forEach(function(t){e.materialList.push(t)})}),this.dialogStatus="update",this.dialogFormVisible=!0,this.$nextTick(function(){e.$refs["dataForm"].clearValidate()})):this.$message({title:"失败",message:"入库单"+this.In.Code+"状态"+this.In.StatusCaption+"不可编辑",type:"error",duration:2e3})},updateData:function(){var t=this;this.$refs["dataForm"].validate(function(e){if(e){if(t.In.AddMaterial=[],t.addMaterial.forEach(function(e){t.In.AddMaterial.push(e)}),!t.checkItem(t.In.AddMaterial[t.In.AddMaterial.length-1]))return;var a=Object.assign({},t.In);p(a).then(function(e){var a=JSON.parse(e.data.Content);a.Success?(t.dialogFormVisible=!1,t.getList(),t.$message({title:"成功",message:"更新成功",type:"success",duration:2e3})):t.$message({title:"失败",message:"创建失败："+a.Message,type:"error",duration:2e3})})}})},handleDelete:function(t){var e=this;if(this.In=Object.assign({},t),0!==this.In.Status)return console.log(this.In.Status),void this.$message({title:"失败",message:"入库单"+this.In.Code+"状态"+t.StatusCaption+"不可删除",type:"error",duration:2e3});this.$confirm("此操作将永久删除该入库单, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.deleteData(e.In)}).catch(function(){e.$message({type:"info",message:"已取消删除"})}),this.$nextTick(function(){e.$refs["dataForm"].clearValidate()})},deleteData:function(t){var e=this;c(t).then(function(t){var a=JSON.parse(t.data.Content);a.Success?(e.dialogFormVisible=!1,e.$message({title:"成功",message:"删除成功",type:"success",duration:2e3}),e.getList()):e.$message({title:"成功",message:"删除失败："+a.Message,type:"error",duration:2e3})})},handleRowClick:function(t){var e=this;o(t.Code).then(function(t){var a=JSON.parse(t.data.Content);e.listMaterial=a})},handleCreateInMaterial:function(){var t=this.addMaterial.length+1;if(t>1){var e=this.addMaterial[this.addMaterial.length-1];if(!this.checkItem(e))return}var a={MaterialCode:"",MaterialName:"",BatchCode:"",Quantity:0,MaterialLabel:"",Id:t,Status:0,ManufactrueDate:"",MaterialTypeDescription:""};this.addMaterial.push(a)},checkItem:function(t){return""===t.MaterialCode?(this.$message({title:"成功",message:"请选择物料",type:"error",duration:2e3}),this.isDisable=!1,!1):0===t.Quantity||"0"===t.Quantity||"0.0"===t.Quantity||"0.00"===t.Quantity?(this.$message({title:"成功",message:"请输入重量(g)",type:"error",duration:2e3}),this.isDisable=!1,!1):""===t.ManufactrueDate?(this.$message({title:"成功",message:"请输入生产日期",type:"error",duration:2e3}),this.isDisable=!1,!1):!!Object(C["c"])(t.Quantity)||(this.$message({title:"成功",message:"请输入正确的数字（包含两位小数的数字或者不包含小数的数字）",type:"error",duration:2e3}),this.isDisable=!1,!1)},remoteMethod:function(t){var e=this;""!==t?(this.loading=!0,s(t).then(function(t){var a=JSON.parse(t.data.Content);console.log(a),e.materialList=a}),setTimeout(function(){e.loading=!1},200)):(this.materialList=[],this.editMaterialList.forEach(function(t){e.materialList.push(t)}))},remoteSupplierMethod:function(t){var e=this;""!==t?(this.loading=!0,Object(L["e"])(t).then(function(t){var a=JSON.parse(t.data.Content);e.supplierList=a}),setTimeout(function(){e.loading=!1},200)):(this.supplierList=[],this.editSupplierList.forEach(function(t){e.supplierList.push(t)}))},handleDeleteInMaterial:function(){void 0!==this.addMaterialGridCurrentRowIndex&&this.addMaterial.splice(this.addMaterial.indexOf(this.addMaterialGridCurrentRowIndex),1)},materialCodeChange:function(t){this.addMaterial.find(function(e){return e.MaterialCode===t.MaterialCode}).MaterialTypeDescription=this.materialList.find(function(e){return e.Code===t.MaterialCode}).MaterialTypeDescription},addMaterialGridClick:function(t,e,a){this.addMaterialGridCurrentRowIndex=t},GetWareHouseList:function(){var t=this;u().then(function(e){var a=JSON.parse(e.data.Content);console.log(a),t.WareHouseList=a})},beforeUpload:function(t){var e="application/vnd.ms-excel"===t.type,a="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"===t.type;return e|a},handleExceed:function(t,e){this.$message.warning("当前限制选择 1 个文件，请删除后继续上传")},uploadFile:function(t){var e=this,a=t.file,i=new FormData;i.append("file",a),i.append("comId",this.comId),m(i).then(function(t){var a=JSON.parse(t.data.Content);a.Success?(e.dialogFormVisible=!1,e.getList(),e.$message({title:"成功",message:"导入成功",type:"success",duration:2e3})):e.$message({title:"失败",message:"导入失败:"+a.Message,type:"error",duration:4e3})})},handleDownUpload:function(){var t=window.PLATFROM_CONFIG.baseUrl+"/api/In/DoDownLoadTemp";window.open(t)},getNowFormatDate:function(){var t=new Date,e="-",a=t.getFullYear(),i=t.getMonth()+1,n=t.getDate();i>=1&&i<=9&&(i="0"+i),n>=0&&n<=9&&(n="0"+n);var l=a+e+i+e+n;return l},next_id:function(){var t=0;return function(){return++t}},handleCheckLabel:function(){var t=this;""!==this.Label.Code&&null!=this.Label.Code?Object(x["c"])(this.Label.Code).then(function(e){if("undefined"!==typeof e.data.Content){var a=JSON.parse(e.data.Content);""===a||null===a?t.restLabel():t.Label=a}else t.$message({title:"失败",message:"未获取到该条码明细，请核查输入条码信息",type:"error",duration:2e3})}):this.$message({title:"失败 ",message:"请先扫描或输入条码",type:"error",duration:2e3})},handlEntereCheckLabel:function(t){var e=this,a=window.event?t.keyCode:t.which;13===a&&Object(x["c"])(this.Label.Code).then(function(t){if("undefined"!==typeof t.data.Content){var a=JSON.parse(t.data.Content);""===a||null===a?e.restLabel():e.Label=a}})},dialogInMaterialVisibleOpen:function(){this.dialogInMaterialVisible=!0,this.InMaterial.Quantity=0,this.resstIn(),this.restLabel()},dialogInMaterialVisibleClose:function(){this.dialogInMaterialVisible=!1,this.resstIn()},createLabelData:function(){var t=this;this.addMaterial.length<=0?this.$message({type:"error",message:"未进行收料操作，无法创建入库单"}):(this.In.AddMaterial=[],this.addMaterial.forEach(function(e){t.In.AddMaterial.push(e)}),d(this.In).then(function(e){var a=JSON.parse(e.data.Content);a.Success?(t.dialogInMaterialVisible=!1,t.getList(),t.$message({title:"成功",message:"创建成功",type:"success",duration:2e3})):t.$message({title:"失败",message:"创建失败："+a.Message,type:"error",duration:2e3})}))},handleSendReceipt:function(t){var e=this;this.In=Object.assign({},t),0===this.In.Status?b(this.In).then(function(t){var a=JSON.parse(t.data.Content);a.Success?(e.$message({title:"成功",message:"亮灯任务发送成功",type:"success",duration:2e3}),e.getList()):e.$message({title:"成功",message:"亮灯任务发送失败"+a.Message,type:"error",duration:2e3})}):this.$message({title:"失败",message:"入库单"+this.In.Code+"状态:["+t.StatusCaption+"]不为待上架",type:"error",duration:2e3})},restLabel:function(){this.Label={Code:null,SupplyCode:null,MaterialCode:null,ProductionDate:null,Batchcode:null}},resstIn:function(){this.In={Code:"",BillCode:"",WareHouseCode:"",InDict:void 0,Remark:""},this.addMaterial=[]},timer:function(){var t=this;return setInterval(function(){t.getList()},1e4)}}},T=k,O=a("2877"),N=Object(O["a"])(T,i,n,!1,null,null,null);e["default"]=N.exports}}]);